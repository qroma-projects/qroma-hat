"use strict";(self.webpackChunkwww_qroma_project=self.webpackChunkwww_qroma_project||[]).push([[4556],{684:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>m,toc:()=>c});var o=t(4848),a=t(8453),s=t(8478),i=t(2194);const r={title:"Get Started"},l="Start Using Qroma Hat",m={id:"index",title:"Get Started",description:"To connect to your Qroma Hat device, plug it into your computer's USB port",source:"@site/src/app-pages/index.md",sourceDirName:".",slug:"/",permalink:"/qroma-hat/app/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Get Started"},sidebar:"getStartedSidebar",next:{title:"Use Qroma Hat",permalink:"/qroma-hat/app/hat-control"}},d={},c=[];function g(e){const n={a:"a",div:"div",h1:"h1",p:"p",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"start-using-qroma-hat",children:"Start Using Qroma Hat"}),"\n",(0,o.jsxs)(n.p,{children:["To connect to your Qroma Hat device, plug it into your computer's USB port\nand click the Connect button. When prompted\nto connect to a serial port, select the entry with the most likely name\n(e.g. something-",(0,o.jsx)("b",{children:"usbserial"}),")."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"/advanced-io/upload-file",children:"Use the Upload page"})," to put your file on the hat's board"]}),"\n",(0,o.jsx)(s.A,{fallback:(0,o.jsx)(n.div,{children:"SvgToGreyscaleArduinoFileTool is only available in the browser"}),children:()=>(0,o.jsx)(i.D,{})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(g,{...e})}):g(e)}},6912:(e,n,t)=>{t.d(n,{t:()=>m});var o=t(6540),a=t(6862),s=t(2227),i=t(7472),r=t(1042),l=t(6967);const m=()=>{console.log("STARTING QromaHatApi");const[e,n]=(0,o.useState)({isWebSerialConnected:!1,keepQromaMonitoringOn:!1,isQromaMonitoringOn:!1});let t,m;const d=(e=>{if(!window)throw Error("Not running in a browser");const n=n=>(0,i._)(n,e.commandMessageType);console.log("CALLING useQromaCommWebSerialRx");const t=(0,r.o)((n=>{e.onPortRequestResult({success:n.isWebSerialConnected})}));return{startMonitoring:t.startMonitoring,getConnectionState:t.getConnectionState,stopMonitoring:t.stopMonitoring,sendQromaAppCommand:async n=>{if(void 0===e.commandMessageType)throw Error("sendQromaAppCommand() failure - no commandMessageType provided on IUseQromaAppWebSerialInputs");const o={command:{oneofKind:"appCommandBytes",appCommandBytes:e.commandMessageType.toBinary(n)}};t.sendQromaCommCommand(o)},createQromaCommMessageForAppCommand:n,sendQromaAppCommandRx:async(o,a,s)=>{const i=n(o),r=Date.now()+s;let m,d=!1;const c=(0,l.p)("downloadRx"),g=n=>{if(console.log("CHECKING FOR APP RESULT"),console.log(n),"appResponseBytes"===n.response.oneofKind){const o=n.response.appResponseBytes;try{if(m=e.responseMessageType.fromBinary(o),void 0===m)return console.log("sendQromaAppCommandRx - UNDEFINED APP RESPONSE BYTES"),void console.log(o);console.log("PARSED APP RESPONSE"),console.log(m),d=a.onAppRx(m)}catch(t){console.log("APP RESPONSE PARSE ERR"),console.log(t)}}return!0},p={hasTimeoutOccurred:()=>Date.now()>r,onTimeout:()=>{console.log("IQromaCommRxHandler for QromaAppWebSerialRx timed out")},isRxComplete:()=>void 0!==m||Date.now()>r,onRx:e=>c.parse(e,g)};await t.sendQromaCommCommandRx(i,p)}}})({onConnect:()=>()=>{console.log("ON CONNECT")},onDisconnect:()=>()=>{console.log("ON DISCONNECT")},onPortRequestResult:e=>{console.log("ON PORT REQUEST RESULT"),console.log(e),n(d.getConnectionState())},commandMessageType:a.Vk,responseMessageType:a.Pw,onQromaCommResponse:e=>{(e=>{t=e})(e)},onQromaAppResponse:e=>{m=e,console.log("LATEST APP RESPONSE"),console.log(e),console.log("UNRECOGNIZED OR INVALID APP RESPONSE IN APP MESSAGE"),console.log(e)}}),c=(0,s.d)(),g=async()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:a.A9.Nac_GetConfiguration}};let n;const t={onAppRx:e=>(console.log("RX HANDLER - QROMA HAT"),console.log(e),"configurationResponse"===e.response.oneofKind&&(n=e.response.configurationResponse.hatConfiguration,!0))};return await d.sendQromaAppCommandRx(e,t,2e3),console.log("HAT API CONFIG RESPONSE"),console.log(n),n};return{init:async()=>{d.startMonitoring()},connectionState:d.getConnectionState(),getCurrentHatConfiguration:g,getCurrentPlaybackConfiguration:async()=>{const e=await g(),n=e?.playbackSettings;return console.log("HAT API PLAYBACK CONFIG RESPONSE"),console.log(n),n},getHatImages:async e=>{console.log("SHOWING DIR CONTENTS FOR "+e);const n=await c.listDir(e);return n&&n.success?(console.log("DIR RESULT"),console.log(n),n.dirItems):(console.log("NO DIR RESULT"),[])},showImageFile:async e=>{console.log("SHOWING HAT IMAGE FILE"),console.log(e);const n={command:{oneofKind:"setHatImage",setHatImage:{imagePath:e}}};d.sendQromaAppCommand(n)},showNextImage:async()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:a.A9.Nac_AdvancePlayback}};d.sendQromaAppCommand(e)},showBlackScreen:async()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:a.A9.Nac_ClearScreenToBlack}};d.sendQromaAppCommand(e)},showWhiteScreen:async()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:a.A9.Nac_ClearScreenToWhite}};d.sendQromaAppCommand(e)},showDefaultScreen:async()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:a.A9.Nac_ShowDefaultImage}};d.sendQromaAppCommand(e)},pausePlayback:async()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:a.A9.Nac_UserPausePlayback}};d.sendQromaAppCommand(e)},resumePlayback:async()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:a.A9.Nac_UserUnpausePlayback}};d.sendQromaAppCommand(e)},setPlaybackDirectoryConfiguration:async(e,n)=>{const t={command:{oneofKind:"setPlayback",setPlayback:{playback:{oneofKind:"dirSlideshow",dirSlideshow:{slideshowDirPath:e,delayIntervalInMs:n}}}}};d.sendQromaAppCommand(t)},uploadToHat:async(e,n)=>{await c.writeFileContents(e,n)}}}},2194:(e,n,t)=>{t.d(n,{D:()=>ke});var o=t(6540),a=t(7733),s=t(3581),i=t(4016),r=t(6786);const l=960,m=540;var d=t(4848);const c=e=>{let{componentState:n}=e;const t=n.grayscaleData,[a,s]=(0,o.useState)("");return console.log("RENDERING GrayscaleConversionOutputImage"),(0,o.useEffect)((()=>{console.log("IN USE EFFECT");const e=document.createElement("canvas");console.log(e),e.width=t.imageWidthInPixels,e.height=t.imageHeightInPixels;const n=e.getContext("2d");if(null===n)return;console.log("CANVAS CTX: "+n);var o=n.createImageData(t.imageWidthInPixels,t.imageHeightInPixels);console.log("IMAGE DATA: "+o);for(let s=0;s<t.dataAsNibbles.length;s++){const e=16*t.dataAsNibbles[s],n=4*s;o.data[n]=e,o.data[n+1]=e,o.data[n+2]=e,o.data[n+3]=255}n.putImageData(o,0,0);const a=e.toDataURL();console.log("CANVAS"),console.log(e),s(a),console.log(`SETTING CANVAS HEIGHT: ${t.imageHeightInPixels}`),console.log(`SETTING CANVAS WIDTH: ${t.imageWidthInPixels}`)}),[n.grayscaleData]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{style:{width:480,height:270},children:(0,d.jsx)("img",{src:a})})})};var g=t(5674);let p=function(e){return e.lightness="lightness",e.average="average",e.luminosity="luminosity",e}({});const u=e=>e<16?[0,0,0,0]:e<32?[0,0,0,1]:e<48?[0,0,1,0]:e<64?[0,0,1,1]:e<80?[0,1,0,0]:e<96?[0,1,0,1]:e<112?[0,1,1,0]:e<128?[0,1,1,1]:e<144?[1,0,0,0]:e<160?[1,0,0,1]:e<176?[1,0,1,0]:e<192?[1,0,1,1]:e<208?[1,1,0,0]:e<224?[1,1,0,1]:e<240?[1,1,1,0]:[1,1,1,1],h=e=>{const{p1r:n,p1g:t,p1b:o,p2r:a,p2g:s,p2b:i}=e,r=(a+s+i)/3,l=u((n+t+o)/3),m=u(r);return 16*g.Ay.nibble.write(l)+g.Ay.nibble.write(m)},f=e=>{const{p1r:n,p1g:t,p1b:o,p2r:a,p2g:s,p2b:i}=e,r=(a+s+i)/3,l=u((n+t+o)/3),m=u(r);return[g.Ay.nibble.write(l),g.Ay.nibble.write(m)]},y=e=>{const n=e.imageData.width;if(n%2!=0)throw new Error("Image width must be even");if(e.conversionAlgorithm!==p.average)throw new Error("Unsupported GS conversion algorithm: "+e.conversionAlgorithm);const t=e.imageData.height,o=[],a=[];for(let s=0;s<t;s++)for(let t=0;t<n;t+=2){const a=4*(s*n+t),i=e.imageData.data,r=h({p1r:i[a],p1g:i[a+1],p1b:i[a+2],p2r:i[a+4],p2g:i[a+5],p2b:i[a+6]});o.push(r)}for(let s=0;s<t;s++)for(let t=0;t<n;t+=2){const o=4*(s*n+t),i=e.imageData.data,[r,l]=f({p1r:i[o],p1g:i[o+1],p1b:i[o+2],p2r:i[o+4],p2g:i[o+5],p2b:i[o+6]});a.push(r),a.push(l)}return{dataAsUint8Array:new Uint8ClampedArray(o),dataAsNibbles:a,imageHeightInPixels:t,imageWidthInPixels:n,imageLabel:e.imageLabel}},w=e=>{if((e=(e=e.trim()).slice(e.indexOf("<svg"))).startsWith("<svg")&&e.endsWith("svg>")&&(e.includes("http://www.w3.org/2000/svg")||(e=e.replace(/<svg/g,"<svg xmlns='http://www.w3.org/2000/svg'")),(e=(e=(e=(e=(e=(e=(e=e.replace(/<!--.{1,}-->/g,"")).replace(/version=[\"\'](.{0,}?)[\"\'](?=[\s>])/g,"")).replace(/"'(.{1,})'"/g,"'$1'")).replace(/"/g,"'")).replace(/>\s{1,}</g,"><")).replace(/\s{2,}/g," ")).trim()).startsWith("<svg")&&e.endsWith("svg>")))return e=`data:image/svg+xml,${e=(e=e.replace(/&/g,"&amp;")).replace(/[%#<>?\[\\\]^`{|}]/g,encodeURIComponent)}`},C=e=>{const n=(0,o.useRef)(null);return(0,d.jsx)("div",{style:{width:480,height:270},children:(0,d.jsx)("img",{ref:n,src:e.svgAsDataUrl,onLoad:()=>{try{if(null===n||null===n.current)return;const t=document.createElement("canvas");t.width=n.current.naturalWidth,t.height=n.current.naturalHeight;const o=t.getContext("2d");o.drawImage(n.current,0,0);const a=o.getImageData(0,0,t.width,t.height),s=y({imageData:a,conversionAlgorithm:p.average,imageLabel:e.gsImageLabel});console.log(s),e.onGsConvertedData(s)}catch(t){console.log("CANVAS ERROR: "+t)}},height:0,width:0})})},k=e=>{let{text:n,fileName:t}=e;const[a,s]=(0,o.useState)(!1),i=new Blob([n],{type:"text/plain"});var[r,l]=(0,o.useState)("");let m=new FileReader;m.readAsDataURL(i),m.onload=function(){const e=m.result;l(e)};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("button",{disabled:a,onClick:()=>{s(!0);const e=document.createElement("a");e.href=r,e.download=t,document.body.appendChild(e),e.click(),setTimeout((()=>{s(!1),document.body.removeChild(e)}),2e3)},children:a?"Loading...":"Download"})})},b=e=>{let{text:n}=e;const[t,a]=(0,o.useState)(!1);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(n).then((()=>{a(!0)}))},children:"Copy to clipboard"}),t&&(0,d.jsx)("p",{children:"Copied to clipboard!"})]})},R=256,S=16777216,T=e=>64+e,x=e=>{if(e<=63)return[T(e)];if(e<=16383)return(e=>{const n=e%R;return[128+Math.floor(e/R),n]})(e);if(e<=1073741823)return(e=>{const n=e%R,t=e%65536,o=Math.floor(t/R),a=e%S,s=Math.floor(a/65536);return[192+Math.floor(e/S),s,o,n]})(e);throw new Error("Pixel count is too high to create Op Run: "+e)},N=e=>{const n=[],t=[],o=e.gsData,a=e.gsData.dataAsNibbles;let s=a[0],i=0;for(let r=0;r<a.length;r++)if(a[r]===s)i++;else{const e=s,o=x(i);n.push(e),n.push(...o),t.push({gsValue:s,runLengthInPixels:i,opPlacePixelByte:e,opRunLength:o,runBytes:new Uint8ClampedArray([e,...o])}),i=1,s=a[r]}if(i>0){const e=s,o=x(i);n.push(e),n.push(...o),t.push({gsValue:s,runLengthInPixels:i,opPlacePixelByte:e,opRunLength:o,runBytes:new Uint8ClampedArray([e,...o])})}return{imageHeightInPixels:o.imageHeightInPixels,imageWidthInPixels:o.imageWidthInPixels,imageLabel:o.imageLabel,dataAsUint8Array:new Uint8ClampedArray(n),pixelRuns:t}},v=e=>{let n=e.toString(16);n.length<2&&(n="0"+n);return"0x"+n},I=e=>`${v(e.opPlacePixelByte)}, ${e.opRunLength.map(v).join(", ")},   // OP_PLACE GS: ${e.gsValue}, OP_RUN LENGTH: ${e.runLengthInPixels}`,F=(e,n,t)=>{const o=e.imageWidthInPixels,a=e.imageHeightInPixels,s=N({gsData:e}),i=(e=>{console.log("PIXEL RUNS"),console.log(e.pixelRuns);const n=e.pixelRuns.map(I);return console.log(n),n.join("\n")})(s),r=i,l=e.imageLabel.replace(/ /g,"_"),m=`thisImageLabel_${`${t.imageGroupNameRoot}_${l}`}`;return`\n#include "${t.imageTypesFilePath}"\n\nconst uint8_t thisDgsrData[\n  ${s.dataAsUint8Array.length}   // ${s.dataAsUint8Array.length} bytes of DGSR data\n] = {\n${r}\n};\n\nconst char * ${m} = "${s.imageLabel}";\n\nHatDgsrImageDef dgsr_image_XX_def = {\n  .magic = {'d', 'g', 's', 'r'},\n  \n  .imageWidth = ${o},\n  .imageHeight = ${a},\n  .gsBitsPerPixel = ${n},\n\n  .dgsrDataByteCount = ${s.dataAsUint8Array.length},\n\n  .metadata = {\n    .imageLabel = ${m},\n  },\n\n  .dgrsData = thisDgsrData,\n};\n`},D=()=>(0,d.jsx)("div",{children:"Arduino DGSR Output View"}),O=e=>{let{gsData:n,svgTemplateInputs:t}=e;if(!n)return(0,d.jsx)(D,{});const o=F(n,4,t),a=n.imageLabel.replace(/ /g,"-"),i=`dgsr_image_XX-${t.imageGroupNameRoot}-${a}.cpp`;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k,{text:o,fileName:i}),(0,d.jsx)(b,{text:o}),(0,d.jsx)("div",{children:(0,d.jsx)(s.A,{id:"outlined-multiline-static",label:"DGSR .CPP file Content",multiline:!0,value:o,fullWidth:!0,inputProps:{style:{fontFamily:"monospace",height:"225px",overflow:"scroll"}}})})]})},E=e=>{const n=e.imageWidthInPixels,t=e.imageHeightInPixels,o=N({gsData:e}),a=o.dataAsUint8Array,s=o.dataAsUint8Array.length,i=new Uint8Array(12+s+8);i[0]="d".charCodeAt(0),i[1]="g".charCodeAt(0),i[2]="s".charCodeAt(0),i[3]="r".charCodeAt(0),i[4]=n>>24&255,i[5]=n>>16&255,i[6]=n>>8&255,i[7]=255&n,i[8]=t>>24&255,i[9]=t>>16&255,i[10]=t>>8&255,i[11]=255&t;for(let r=0;r<s;r++)i[12+r]=a[r];for(let r=0;r<7;r++){i[12+s+r]=0}return i[12+s+7]=1,i};var A=t(3870);const j=e=>{const{isBusy:n,setIsBusy:t,fileNameRoot:a}=e;var[s,i]=(0,o.useState)(""),[r,l]=(0,o.useState)("");(0,o.useEffect)((()=>{const n=e.componentState.svgImageText,t=new Blob([n],{type:"text/plain"});let o=new FileReader;o.readAsDataURL(t),o.onload=()=>{const e=o.result;i(e)};const a=E(e.componentState.grayscaleData),s=new Blob([a],{type:"application/octet-stream"});let r=new FileReader;r.readAsDataURL(s),r.onload=()=>{const e=r.result;l(e)}}),[e.componentState.grayscaleData,e.componentState.svgImageText]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{children:(0,d.jsx)("button",{disabled:n,onClick:()=>{const e=a+".svg";t(!0);const n=document.createElement("a");n.href=s,n.download=e,document.body.appendChild(n),n.click(),setTimeout((()=>{t(!1),document.body.removeChild(n)}),2e3)},children:n?"Loading...":"Download SVG to PC"})}),(0,d.jsx)("div",{children:(0,d.jsx)("button",{disabled:n,onClick:()=>{const e=a+".dgsr";t(!0);const n=document.createElement("a");n.href=r,n.download=e,document.body.appendChild(n),n.click(),setTimeout((()=>{t(!1),document.body.removeChild(n)}),2e3)},children:n?"Loading...":"Download DGSR to PC"})})]})};var P=t(6912),B=t(2281),$=t(2046);const L=e=>{const{isBusy:n,setIsBusy:t,fileNameRoot:a,imageDataFileBytes:s}=e,[i,r]=(0,o.useState)(null),[l,m]=(0,o.useState)(!0),c=(0,P.t)(),g=c.connectionState.isWebSerialConnected;return g?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{disabled:n,onClick:async()=>{t(!0),console.log("UPLOAD: "+e.uploadFilePath),console.log("SIZE: "+s.length),await c.uploadToHat(e.uploadFilePath,s),console.log("DONE UPLOAD"),l&&((0,$.j2)("DO SHOW AFTER UPLOAD - "),await(0,B.yy)(5e3),(0,$.j2)("SENDING SHOW COMMAND - "),await c.showImageFile(e.uploadFilePath)),t(!1)},children:n?"Loading...":"Upload This to Hat"}),(0,d.jsx)("button",{disabled:n,onClick:()=>{c.showImageFile(e.uploadFilePath)},children:n?"Loading...":"Show on Hat"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("input",{type:"file",onChange:e=>{const n=e.target.files[0],t=new FileReader;t.onload=e=>{const n=e.target.result,t=new Uint8Array(n);r(t)},t.readAsArrayBuffer(n)}}),null!==i?i.length:"",(0,d.jsx)("button",{disabled:n||!i,onClick:()=>{},children:n?"Loading...":"Upload From File to Hat"})]})]}):(0,d.jsx)("button",{onClick:()=>(c.init(),void console.log("qromaCommFileSystemApi - INIT CALLED FROM SHOW QROMA DIR")),children:"Start Connection"})},U=e=>{const{isBusy:n,fileNameRoot:t,imageDataFileBytes:o,checksum:a}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{children:t}),(0,d.jsx)("div",{children:e.imageLabel}),(0,d.jsx)("div",{children:e.uploadFilePath}),(0,d.jsxs)("div",{children:[o.length," bytes"]}),(0,d.jsxs)("div",{children:["Checksum: ",a]})]})};var W=t(6995);const M=e=>{const[n,t]=(0,o.useState)(!1),a=E(e.componentState.grayscaleData),s="blob",i="/dgsr/"+((e,n)=>e.replace(/\s/g,"_").replace(/[^\w]/g,"").slice(0,n))(e.componentState.gsImageLabel,20)+".dgsr";const r=(0,W.QR)(a);return(0,d.jsxs)(A.Ay,{container:!0,spacing:2,children:[(0,d.jsx)(A.Ay,{item:!0,xs:12,children:(0,d.jsx)(U,{isBusy:n,imageDataFileBytes:a,fileNameRoot:s,uploadFilePath:i,imageLabel:e.componentState.gsImageLabel,checksum:r})}),(0,d.jsx)(A.Ay,{item:!0,xs:6,children:(0,d.jsx)(L,{isBusy:n,setIsBusy:t,imageDataFileBytes:a,fileNameRoot:s,uploadFilePath:i})}),(0,d.jsx)(A.Ay,{item:!0,xs:6,children:(0,d.jsx)(j,{isBusy:n,setIsBusy:t,componentState:e.componentState,fileNameRoot:s})})]})};function Q(e){const{children:n,value:t,index:o,...s}=e;return(0,d.jsx)("div",{role:"tabpanel",hidden:t!==o,id:`simple-tabpanel-${o}`,"aria-labelledby":`simple-tab-${o}`,...s,children:t===o&&(0,d.jsx)(a.A,{sx:{p:3},children:n})})}function G(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}const _=e=>{let{svgInputText:n}=e;return console.log("svgInputText"),console.log(n),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{children:(0,d.jsx)(s.A,{id:"outlined-multiline-static",label:"SVG Input",multiline:!0,value:n,fullWidth:!0,inputProps:{style:{fontFamily:"monospace",height:"250px",overflow:"scroll"}}})})})},K=e=>{const[n,t]=o.useState(3),s=async()=>{var n=document.createElement("img");const t=w(e.componentState.svgImageText);n.onload=async()=>{let t=new FileReader;const o=new Blob([e.componentState.svgImageText],{type:"image/svg+xml"});t.readAsDataURL(o),t.onload=function(){const o=t.result;(n=>{try{const t=document.createElement("canvas").getContext("2d");t.drawImage(n,0,0);const o=t?.getImageData(0,0,n.width,n.height),a=y({imageData:o,conversionAlgorithm:p.average,imageLabel:e.componentState.gsImageLabel});e.onNewGrayscaleData(a)}catch(t){console.log("CANVAS ERROR: "+t)}})(n),e.onNewSvgImageAsDataUrl(o)}},n.src=t};return(0,o.useEffect)((()=>{(async()=>{await s()})()}),[e.componentState.svgImageText]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(a.A,{sx:{borderBottom:1,borderColor:"divider",height:400},children:[(0,d.jsx)("canvas",{id:"canvas-ImageOutputView",height:0,width:0}),(0,d.jsx)("div",{style:{width:0,height:0},children:(0,d.jsx)(C,{svgAsDataUrl:e.componentState.svgImageAsDataUrl,gsImageLabel:e.componentState.gsImageLabel,onGsConvertedData:n=>{e.onNewGrayscaleData(n)}})}),(0,d.jsx)(a.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,d.jsxs)(i.A,{value:n,onChange:(e,n)=>{t(n)},"aria-label":"basic tabs example",variant:"scrollable",children:[(0,d.jsx)(r.A,{label:"SVG Text",...G(0)}),(0,d.jsx)(r.A,{label:"SVG Image",...G(1)}),(0,d.jsx)(r.A,{label:"Grayscale",...G(2)}),(0,d.jsx)(r.A,{label:"Manage DGSR",...G(3)}),(0,d.jsx)(r.A,{label:"Arduino/DGSR",...G(4)})]})}),(0,d.jsx)(Q,{value:n,index:0,children:(0,d.jsx)(_,{svgInputText:e.componentState.svgImageText})}),(0,d.jsx)(Q,{value:n,index:1,children:(0,d.jsx)("div",{style:{width:480,height:270},children:(0,d.jsx)("img",{src:e.componentState.svgImageAsDataUrl})})}),(0,d.jsx)(Q,{value:n,index:2,children:(0,d.jsx)(c,{componentState:e.componentState})}),(0,d.jsx)(Q,{value:n,index:3,children:(0,d.jsx)(M,{componentState:e.componentState})}),(0,d.jsx)(Q,{value:n,index:4,children:(0,d.jsx)(O,{gsData:e.componentState.grayscaleData,svgTemplateInputs:e.componentState.svgTemplateInputs})})]})})};var V=t(26),H=t(8440),q=t(2909),X=t(3232),z=t(7512),Y=t(8999),J=t(5848);const Z="QROMA",ee=e=>{let{line1:n,svgTemplateInputs:t}=e;return(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",baseProfile:"full",width:l,height:m,children:[(0,d.jsx)("rect",{width:"100%",height:"100%",fill:"white",stroke:"black",strokeWidth:t.borderWidth,strokeOpacity:"1.0"}),(0,d.jsx)("text",{x:480,y:270,fontSize:t.fontSize,fontFamily:t.fontFamily,textAnchor:"middle",dominantBaseline:"middle",fill:"black",children:n})]})},ne=(e,n)=>({newSvgText:(0,J.F0)((0,d.jsx)(ee,{line1:e,svgTemplateInputs:n})),svgImageLabel:e}),te=e=>{const[n,t]=(0,o.useState)(Z),[a,i]=(0,o.useState)("Arial, Helvetica, sans-serif"),[r,l]=(0,o.useState)(160),[m,c]=(0,o.useState)("");return(0,o.useEffect)((()=>{e.svgGenerationInputsUpdateFn(ne(n,e.templateInputs))}),[n,e.templateInputs]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(Y.A,{spacing:2,children:(0,d.jsx)(s.A,{id:"outlined-required",label:"Line 1",value:n,onChange:e=>{const n=e.target.value;t(n)}},"single-line-text-line1-input")})})},oe=e=>{let{line1:n,line2:t,svgTemplateInputs:o}=e;return(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",baseProfile:"full",width:l,height:m,children:[(0,d.jsx)("rect",{width:"100%",height:"100%",fill:"white",stroke:"black",strokeWidth:o.borderWidth,strokeOpacity:"1.0"}),(0,d.jsx)("text",{x:480,y:178.20000000000002,fontSize:o.fontSize,fontFamily:o.fontFamily,textAnchor:"middle",dominantBaseline:"middle",fill:"black",children:n}),(0,d.jsx)("text",{x:480,y:405,fontSize:o.fontSize,fontFamily:o.fontFamily,textAnchor:"middle",dominantBaseline:"middle",fill:"black",children:t})]})},ae=(e,n,t)=>({newSvgText:(0,J.F0)((0,d.jsx)(oe,{line1:e,line2:n,svgTemplateInputs:t})),svgImageLabel:e+" "+n}),se=e=>{console.log("IN FORM PROVIDER - 2");const[n,t]=(0,o.useState)("QROMA"),[a,i]=(0,o.useState)("HAT");return(0,o.useEffect)((()=>{e.svgGenerationInputsUpdateFn(ae(n,a,e.templateInputs))}),[n,a,e.templateInputs]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(Y.A,{spacing:2,children:[(0,d.jsx)(s.A,{id:"outlined-required",label:"Line 1",value:n,onChange:e=>{const n=e.target.value;t(n)}}),(0,d.jsx)(s.A,{id:"outlined-required",label:"Line 2",value:a,onChange:e=>{const n=e.target.value;i(n)}})]})})},ie=e=>{let{line1:n,line2:t,line3:o,svgTemplateInputs:a}=e;return(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",baseProfile:"full",width:l,height:m,children:[(0,d.jsx)("rect",{width:"100%",height:"100%",fill:"white",stroke:"black",strokeWidth:a.borderWidth,strokeOpacity:"1.0"}),(0,d.jsx)("text",{x:480,y:108,fontSize:a.fontSize,fontFamily:a.fontFamily,textAnchor:"middle",dominantBaseline:"middle",fill:"black",children:n}),(0,d.jsx)("text",{x:480,y:270,fontSize:a.fontSize,fontFamily:a.fontFamily,textAnchor:"middle",dominantBaseline:"middle",fill:"black",children:t}),(0,d.jsx)("text",{x:480,y:432,fontSize:a.fontSize,fontFamily:a.fontFamily,textAnchor:"middle",dominantBaseline:"middle",fill:"black",children:o})]})},re=(e,n,t,o)=>({newSvgText:(0,J.F0)((0,d.jsx)(ie,{line1:e,line2:n,line3:t,svgTemplateInputs:o})),svgImageLabel:e+" "+n+" "+t}),le=e=>{console.log("IN FORM PROVIDER - 2");const[n,t]=(0,o.useState)("FIRST"),[a,i]=(0,o.useState)("GENERATION"),[r,l]=(0,o.useState)("PERFECT"),[m,c]=(0,o.useState)("arial"),[g,p]=(0,o.useState)(140);return(0,o.useEffect)((()=>{e.svgGenerationInputsUpdateFn(re(n,a,r,{...e.templateInputs,fontSize:g}))}),[n,a,r,e.templateInputs]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(Y.A,{spacing:2,children:[(0,d.jsx)(s.A,{id:"outlined-required",label:"Line 1",value:n,onChange:e=>{const n=e.target.value;t(n)}}),(0,d.jsx)(s.A,{id:"outlined-required",label:"Line 2",value:a,onChange:e=>{const n=e.target.value;i(n)}}),(0,d.jsx)(s.A,{id:"outlined-required",label:"Line 3",value:r,onChange:e=>{const n=e.target.value;l(n)}})]})})},me=e=>{const[n,t]=(0,o.useState)(null),[a,s]=(0,o.useState)(null);return(0,d.jsxs)("div",{children:[(0,d.jsx)("input",{type:"file",onChange:e=>{const n=e.target.files?.[0];s(n)}}),(0,d.jsx)("button",{onClick:()=>{if(!a)return;const n=new FileReader;n.onloadend=()=>{const o=n.result;t(o),e.onNewImageDataUrl(o)},n.readAsDataURL(a)},children:"Upload"}),n&&(0,d.jsx)("img",{src:n,alt:"uploaded"})]})},de="Put Image Name Here",ce=e=>(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",width:l,height:m,children:[(0,d.jsx)("rect",{width:"100%",height:"100%",fill:"white",stroke:"black",strokeWidth:"20",strokeOpacity:"1.0"}),(0,d.jsx)("image",{x:e.xOffset,y:e.yOffset,xlinkHref:e.embeddedImageUrl})]}),ge=(e,n,t,o)=>({newSvgText:(0,J.F0)((0,d.jsx)(ce,{embeddedImageUrl:e,xOffset:t,yOffset:o})),svgImageLabel:n}),pe=e=>{const[n,t]=(0,o.useState)(de),[a,i]=(0,o.useState)(""),[r,l]=(0,o.useState)(30),[m,c]=(0,o.useState)(40),g=(e,n,t)=>{if(null===e)return null;const o=parseInt(e);return o>=n&&o<=t?o:null};return(0,o.useEffect)((()=>{e.svgGenerationInputsUpdateFn(ge(a,n,r,m))}),[a,n,r,m]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(Y.A,{spacing:2,children:[(0,d.jsxs)("div",{children:["Embedded Image X Offset: ",r,(0,d.jsx)("button",{onClick:()=>{const e=window.prompt("Choose X Offset (0-450)",r.toString()),n=g(e,0,450);null!==n&&l(n)},children:"Change"})]}),(0,d.jsxs)("div",{children:["Embedded Image Y Offset: ",m,(0,d.jsx)("button",{onClick:()=>{const e=window.prompt("Choose Y Offset (0-250)",m.toString()),n=g(e,0,250);null!==n&&c(n)},children:"Change"})]}),(0,d.jsx)(me,{onNewImageDataUrl:e=>{i(e)}}),(0,d.jsx)(s.A,{id:"outlined-required",label:"Image Name",value:n,onChange:o=>{const s=o.target.value;t(s),e.svgGenerationInputsUpdateFn(ge(a,n,r,m))}},"single-line-text-line1-input")]})})},ue=[{templateTitle:"Double Line",defaultSvgToGrayscaleInputs:e=>ae("","",e),formProvider:e=>(0,d.jsx)(se,{svgGenerationInputsUpdateFn:e.svgGenerationInputsUpdateFn,templateInputs:e.templateInputs})},{templateTitle:"Single Line",defaultSvgToGrayscaleInputs:e=>ne(Z,e),formProvider:e=>(0,d.jsx)(te,{svgGenerationInputsUpdateFn:e.svgGenerationInputsUpdateFn,templateInputs:e.templateInputs})},{templateTitle:"Triple Line",defaultSvgToGrayscaleInputs:e=>re("","","",e),formProvider:e=>(0,d.jsx)(le,{svgGenerationInputsUpdateFn:e.svgGenerationInputsUpdateFn,templateInputs:e.templateInputs})},{templateTitle:"Embedded Image",defaultSvgToGrayscaleInputs:()=>ge("",de,0,0),formProvider:e=>(0,d.jsx)(pe,{svgGenerationInputsUpdateFn:e.svgGenerationInputsUpdateFn})}],he=e=>{const[n,t]=(0,o.useState)(!1),s=(e,n,t)=>{if(null===e)return null;const o=parseInt(e);return o>=n&&o<=t?o:null};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(a.A,{sx:{borderColor:"divider"},children:[(0,d.jsxs)(A.Ay,{container:!0,spacing:2,children:[(0,d.jsx)(A.Ay,{item:!0,xs:8,children:(0,d.jsxs)(V.A,{fullWidth:!0,children:[(0,d.jsx)(H.A,{id:"svg-template-select-label",children:"SVG Template"}),(0,d.jsx)(q.A,{labelId:"svg-template-select-label",id:"svg-template-select",value:e.svgTemplateIndex,label:"SVG Template",onChange:n=>{const t=n.target.value;console.log("SVG TEMPLATE INDEX: "+t);const o=ue[t];e.onNewSvgTemplateSelected(t,o)},children:ue.map(((e,n)=>(0,d.jsx)(X.A,{value:n,children:e.templateTitle},e.templateTitle)))})]})}),(0,d.jsx)(A.Ay,{item:!0,xs:4,children:(0,d.jsx)(z.A,{onClick:()=>t(!n),children:n?"Hide Settings":"Settings"})}),n?(0,d.jsx)(A.Ay,{item:!0,xs:12,children:(0,d.jsxs)(Y.A,{spacing:2,children:[(0,d.jsxs)("div",{children:["Font Size: ",e.svgTemplateInputs.fontSize,(0,d.jsx)("button",{onClick:()=>{const n=window.prompt("Choose new font size (20-300)",e.svgTemplateInputs.fontSize.toString());console.log("NEW FONT SIZE: "+n);const t=s(n,20,300);null!==t&&e.onNewSvgTemplateInputs({...e.svgTemplateInputs,fontSize:t})},children:"Change"})]}),(0,d.jsxs)("div",{children:["Border Thickness: ",e.svgTemplateInputs.borderWidth,(0,d.jsx)("button",{onClick:()=>{const n=window.prompt("Choose new border thickness (10-300)",e.svgTemplateInputs.borderWidth.toString());console.log("NEW BORDER THICKNESS: "+n);const t=s(n,10,300);null!==t&&e.onNewSvgTemplateInputs({...e.svgTemplateInputs,borderWidth:t})},children:"Change"})]}),(0,d.jsxs)("div",{children:["Font Family: ",e.svgTemplateInputs.fontFamily,(0,d.jsx)("button",{onClick:()=>{const n=window.prompt("Choose new font family\n1 - Arial\n2 - exo","1");console.log("NEW FONT FAMILY THICKNESS: "+n);const t=((e,n)=>{if(null===e)return null;const t=parseInt(e)-1;return t>=0&&t<n.length?n[t]:null})(n,["arial","exo"]);null!==t&&e.onNewSvgTemplateInputs({...e.svgTemplateInputs,fontFamily:t})},children:"Change"})]})]})}):null]}),(0,d.jsx)("div",{})]})})};var fe=t(2979);class ye extends fe.ImmerReducer{setSvgText(e){if(this.draftState.svgImageText!==e){this.draftState.svgImageText=e;const n=w(e);this.draftState.svgImageAsDataUrl=n}}setGsImageLabel(e){this.draftState.gsImageLabel!==e&&(this.draftState.gsImageLabel=e)}setImageGrayscaleData(e){this.draftState.grayscaleData=e}setSvgToGrayscaleTemplate(e){this.draftState.svgToGrayscaleTemplate!==e&&(this.draftState.svgToGrayscaleTemplate=e)}setSvgImageAsDataUrl(e){this.draftState.svgImageAsDataUrl!==e&&(this.draftState.svgImageAsDataUrl=e)}setSvgTemplateInputs(e){console.log(e),this.draftState.svgTemplateInputs!==e&&(this.draftState.svgTemplateInputs=e)}}const we=(0,fe.createActionCreators)(ye),Ce=(0,fe.createReducerFunction)(ye),ke=()=>{const e=(e=>{const n={fontFamily:"arial",fontSize:170,borderWidth:20,imageTypesFilePath:"image_types.h",imageGroupNameRoot:"frank_hats_season2"};return{svgImageText:e.defaultSvgToGrayscaleInputs(n).newSvgText,svgImageAsDataUrl:"",grayscaleData:{dataAsUint8Array:new Uint8ClampedArray,dataAsNibbles:[],imageHeightInPixels:0,imageWidthInPixels:0,imageLabel:"UNLABELED IMAGE"},gsImageLabel:"NO LABEL SET YET",svgToGrayscaleTemplate:e,svgTemplateInputs:n}})(ue[0]);console.log(e);const[n,t]=(0,o.useState)(0),[a,s]=(0,o.useReducer)(Ce,e),i={state:a,svgTemplateIndex:n,dispatch:s,setSvgTemplateIndex:t,onSvgToGsInputsUpdate:e=>{s(we.setSvgText(e.newSvgText)),s(we.setGsImageLabel(e.svgImageLabel))},onNewGrayscaleData:e=>{s(we.setImageGrayscaleData(e))},onNewSvgImageAsDataUrl:e=>{s(we.setSvgImageAsDataUrl(e))},onNewSvgTemplateInputs:e=>{s(we.setSvgTemplateInputs(e))}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{},children:(0,d.jsx)(K,{componentState:i.state,onNewGrayscaleData:i.onNewGrayscaleData,onNewSvgImageAsDataUrl:i.onNewSvgImageAsDataUrl})}),(0,d.jsx)("div",{style:{marginBottom:20}}),(0,d.jsx)(he,{svgTemplateIndex:i.svgTemplateIndex,onNewSvgTemplateSelected:(e,n)=>{i.setSvgTemplateIndex(e),i.dispatch(we.setSvgToGrayscaleTemplate(n))},onGenerateNewSvg:e=>{i.onSvgToGsInputsUpdate(e)},onSvgTemplateFormUpdate:(e,n)=>{},svgTemplateInputs:i.state.svgTemplateInputs,onNewSvgTemplateInputs:i.onNewSvgTemplateInputs}),(0,d.jsx)("div",{style:{marginBottom:20}}),ue[i.svgTemplateIndex].formProvider({templateInputs:i.state.svgTemplateInputs,svgGenerationInputsUpdateFn:i.onSvgToGsInputsUpdate})]})}},6862:(e,n,t)=>{t.d(n,{A9:()=>i,Pw:()=>W,Vk:()=>N});var o=t(8899),a=t(3923),s=t(3724);let i=function(e){return e[e.Nac_NotSet=0]="Nac_NotSet",e[e.Nac_ClearScreenToWhite=1]="Nac_ClearScreenToWhite",e[e.Nac_ClearScreenToBlack=2]="Nac_ClearScreenToBlack",e[e.Nac_ShowDefaultImage=3]="Nac_ShowDefaultImage",e[e.Nac_GetConfiguration=4]="Nac_GetConfiguration",e[e.Nac_AdvancePlayback=5]="Nac_AdvancePlayback",e[e.Nac_UserPausePlayback=6]="Nac_UserPausePlayback",e[e.Nac_UserUnpausePlayback=7]="Nac_UserUnpausePlayback",e}({}),r=function(e){return e[e.Pbm_NotSet=0]="Pbm_NotSet",e[e.Pbm_ShowDefaultImage=1]="Pbm_ShowDefaultImage",e[e.Pbm_ShowSingleFile=2]="Pbm_ShowSingleFile",e[e.Pbm_UseDirectoryForRandomFileSlideshow=3]="Pbm_UseDirectoryForRandomFileSlideshow",e[e.Pbm_ShowWhiteScreen=4]="Pbm_ShowWhiteScreen",e[e.Pbm_ShowBlackScreen=5]="Pbm_ShowBlackScreen",e}({});class l extends s.G{constructor(){super("SetHatRotateImageCommand",[{no:1,name:"rotateImage",kind:"scalar",T:8}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.rotateImage=!1,void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.rotateImage=e.bool();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){!1!==e.rotateImage&&n.tag(1,o.O0.Varint).bool(e.rotateImage);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const m=new l;class d extends s.G{constructor(){super("SetHatImageCommand",[{no:1,name:"imagePath",kind:"scalar",T:9}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.imagePath="",void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.imagePath=e.string();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.imagePath&&n.tag(1,o.O0.LengthDelimited).string(e.imagePath);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const c=new d;class g extends s.G{constructor(){super("SetPlaybackDirectoryCommand",[{no:1,name:"playbackDir",kind:"scalar",T:9}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.playbackDir="",void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.playbackDir=e.string();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.playbackDir&&n.tag(1,o.O0.LengthDelimited).string(e.playbackDir);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}new g;class p extends s.G{constructor(){super("GetDgsrImageValidationResultCommand",[{no:1,name:"imagePath",kind:"scalar",T:9}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.imagePath="",void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.imagePath=e.string();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.imagePath&&n.tag(1,o.O0.LengthDelimited).string(e.imagePath);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const u=new p;class h extends s.G{constructor(){super("PlaybackSettings_ShowSingleFile",[{no:1,name:"imagePath",kind:"scalar",T:9}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.imagePath="",void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.imagePath=e.string();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.imagePath&&n.tag(1,o.O0.LengthDelimited).string(e.imagePath);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const f=new h;class y extends s.G{constructor(){super("PlaybackSettings_UseDirectoryForRandomFileSlideshow",[{no:1,name:"slideshowDirPath",kind:"scalar",T:9},{no:2,name:"delayIntervalInMs",kind:"scalar",T:13}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.slideshowDirPath="",n.delayIntervalInMs=0,void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.slideshowDirPath=e.string();break;case 2:s.delayIntervalInMs=e.uint32();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.slideshowDirPath&&n.tag(1,o.O0.LengthDelimited).string(e.slideshowDirPath),0!==e.delayIntervalInMs&&n.tag(2,o.O0.Varint).uint32(e.delayIntervalInMs);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const w=new y;class C extends s.G{constructor(){super("SetPlaybackCommand",[{no:2,name:"showSingleFile",kind:"message",oneof:"playback",T:()=>f},{no:3,name:"dirSlideshow",kind:"message",oneof:"playback",T:()=>w}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.playback={oneofKind:void 0},void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 2:s.playback={oneofKind:"showSingleFile",showSingleFile:f.internalBinaryRead(e,e.uint32(),t,s.playback.showSingleFile)};break;case 3:s.playback={oneofKind:"dirSlideshow",dirSlideshow:w.internalBinaryRead(e,e.uint32(),t,s.playback.dirSlideshow)};break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){"showSingleFile"===e.playback.oneofKind&&f.internalBinaryWrite(e.playback.showSingleFile,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),"dirSlideshow"===e.playback.oneofKind&&w.internalBinaryWrite(e.playback.dirSlideshow,n.tag(3,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const k=new C;class b extends s.G{constructor(){super("PlaybackConfiguration",[{no:1,name:"mode",kind:"enum",T:()=>["PlaybackMode",r]},{no:2,name:"showSingleFileSettings",kind:"message",T:()=>f},{no:3,name:"dirSlideshowSettings",kind:"message",T:()=>w},{no:4,name:"isSlideshowPaused",kind:"scalar",T:8},{no:10,name:"randomSeed",kind:"scalar",T:13}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.mode=0,n.isSlideshowPaused=!1,n.randomSeed=0,void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.mode=e.int32();break;case 2:s.showSingleFileSettings=f.internalBinaryRead(e,e.uint32(),t,s.showSingleFileSettings);break;case 3:s.dirSlideshowSettings=w.internalBinaryRead(e,e.uint32(),t,s.dirSlideshowSettings);break;case 4:s.isSlideshowPaused=e.bool();break;case 10:s.randomSeed=e.uint32();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.mode&&n.tag(1,o.O0.Varint).int32(e.mode),e.showSingleFileSettings&&f.internalBinaryWrite(e.showSingleFileSettings,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),e.dirSlideshowSettings&&w.internalBinaryWrite(e.dirSlideshowSettings,n.tag(3,o.O0.LengthDelimited).fork(),t).join(),!1!==e.isSlideshowPaused&&n.tag(4,o.O0.Varint).bool(e.isSlideshowPaused),0!==e.randomSeed&&n.tag(10,o.O0.Varint).uint32(e.randomSeed);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const R=new b;class S extends s.G{constructor(){super("HatConfiguration",[{no:1,name:"activeImagePath",kind:"scalar",T:9},{no:2,name:"rotateImage",kind:"scalar",T:8},{no:3,name:"playbackSettings",kind:"message",T:()=>R}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.activeImagePath="",n.rotateImage=!1,void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.activeImagePath=e.string();break;case 2:s.rotateImage=e.bool();break;case 3:s.playbackSettings=R.internalBinaryRead(e,e.uint32(),t,s.playbackSettings);break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.activeImagePath&&n.tag(1,o.O0.LengthDelimited).string(e.activeImagePath),!1!==e.rotateImage&&n.tag(2,o.O0.Varint).bool(e.rotateImage),e.playbackSettings&&R.internalBinaryWrite(e.playbackSettings,n.tag(3,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const T=new S;class x extends s.G{constructor(){super("MyProjectCommand",[{no:1,name:"noArgCommand",kind:"enum",oneof:"command",T:()=>["NoArgCommands",i]},{no:2,name:"setHatImage",kind:"message",oneof:"command",T:()=>c},{no:3,name:"setHatRotateImage",kind:"message",oneof:"command",T:()=>m},{no:4,name:"getDgsrImageValidationResult",kind:"message",oneof:"command",T:()=>u},{no:5,name:"setPlayback",kind:"message",oneof:"command",T:()=>k}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.command={oneofKind:void 0},void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.command={oneofKind:"noArgCommand",noArgCommand:e.int32()};break;case 2:s.command={oneofKind:"setHatImage",setHatImage:c.internalBinaryRead(e,e.uint32(),t,s.command.setHatImage)};break;case 3:s.command={oneofKind:"setHatRotateImage",setHatRotateImage:m.internalBinaryRead(e,e.uint32(),t,s.command.setHatRotateImage)};break;case 4:s.command={oneofKind:"getDgsrImageValidationResult",getDgsrImageValidationResult:u.internalBinaryRead(e,e.uint32(),t,s.command.getDgsrImageValidationResult)};break;case 5:s.command={oneofKind:"setPlayback",setPlayback:k.internalBinaryRead(e,e.uint32(),t,s.command.setPlayback)};break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){"noArgCommand"===e.command.oneofKind&&n.tag(1,o.O0.Varint).int32(e.command.noArgCommand),"setHatImage"===e.command.oneofKind&&c.internalBinaryWrite(e.command.setHatImage,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),"setHatRotateImage"===e.command.oneofKind&&m.internalBinaryWrite(e.command.setHatRotateImage,n.tag(3,o.O0.LengthDelimited).fork(),t).join(),"getDgsrImageValidationResult"===e.command.oneofKind&&u.internalBinaryWrite(e.command.getDgsrImageValidationResult,n.tag(4,o.O0.LengthDelimited).fork(),t).join(),"setPlayback"===e.command.oneofKind&&k.internalBinaryWrite(e.command.setPlayback,n.tag(5,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const N=new x;class v extends s.G{constructor(){super("InvalidCommandResponse",[{no:1,name:"message",kind:"scalar",T:9}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.message="",void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.message=e.string();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.message&&n.tag(1,o.O0.LengthDelimited).string(e.message);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const I=new v;class F extends s.G{constructor(){super("ConfigurationResponse",[{no:2,name:"hatConfiguration",kind:"message",T:()=>T}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(2===n)s.hatConfiguration=T.internalBinaryRead(e,e.uint32(),t,s.hatConfiguration);else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){e.hatConfiguration&&T.internalBinaryWrite(e.hatConfiguration,n.tag(2,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const D=new F;class O extends s.G{constructor(){super("FirmwareDetailsResponse",[{no:1,name:"version",kind:"scalar",T:9},{no:2,name:"buildTime",kind:"scalar",T:9}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.version="",n.buildTime="",void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.version=e.string();break;case 2:s.buildTime=e.string();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.version&&n.tag(1,o.O0.LengthDelimited).string(e.version),""!==e.buildTime&&n.tag(2,o.O0.LengthDelimited).string(e.buildTime);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const E=new O;class A extends s.G{constructor(){super("UpdateResponse",[{no:1,name:"boardUptimeInMs",kind:"scalar",T:13}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.boardUptimeInMs=0,void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.boardUptimeInMs=e.uint32();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.boardUptimeInMs&&n.tag(1,o.O0.Varint).uint32(e.boardUptimeInMs);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const j=new A;class P extends s.G{constructor(){super("SetHatImageResponse",[{no:1,name:"imagePath",kind:"scalar",T:9},{no:2,name:"success",kind:"scalar",T:8},{no:3,name:"message",kind:"scalar",T:9}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.imagePath="",n.success=!1,n.message="",void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.imagePath=e.string();break;case 2:s.success=e.bool();break;case 3:s.message=e.string();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.imagePath&&n.tag(1,o.O0.LengthDelimited).string(e.imagePath),!1!==e.success&&n.tag(2,o.O0.Varint).bool(e.success),""!==e.message&&n.tag(3,o.O0.LengthDelimited).string(e.message);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const B=new P;class $ extends s.G{constructor(){super("GetDgsrImageValidationResultResponse",[{no:1,name:"imagePath",kind:"scalar",T:9},{no:2,name:"isValid",kind:"scalar",T:8},{no:3,name:"message",kind:"scalar",T:9}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.imagePath="",n.isValid=!1,n.message="",void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.imagePath=e.string();break;case 2:s.isValid=e.bool();break;case 3:s.message=e.string();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.imagePath&&n.tag(1,o.O0.LengthDelimited).string(e.imagePath),!1!==e.isValid&&n.tag(2,o.O0.Varint).bool(e.isValid),""!==e.message&&n.tag(3,o.O0.LengthDelimited).string(e.message);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const L=new $;class U extends s.G{constructor(){super("MyProjectResponse",[{no:1,name:"invalidCommandResponse",kind:"message",oneof:"response",T:()=>I},{no:2,name:"firmwareDetailsResponse",kind:"message",oneof:"response",T:()=>E},{no:3,name:"updateResponse",kind:"message",oneof:"response",T:()=>j},{no:4,name:"configurationResponse",kind:"message",oneof:"response",T:()=>D},{no:5,name:"setHatImageResponse",kind:"message",oneof:"response",T:()=>B},{no:6,name:"getDgsrImageValidationResultResponse",kind:"message",oneof:"response",T:()=>L}])}create(e){const n=globalThis.Object.create(this.messagePrototype);return n.response={oneofKind:void 0},void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.response={oneofKind:"invalidCommandResponse",invalidCommandResponse:I.internalBinaryRead(e,e.uint32(),t,s.response.invalidCommandResponse)};break;case 2:s.response={oneofKind:"firmwareDetailsResponse",firmwareDetailsResponse:E.internalBinaryRead(e,e.uint32(),t,s.response.firmwareDetailsResponse)};break;case 3:s.response={oneofKind:"updateResponse",updateResponse:j.internalBinaryRead(e,e.uint32(),t,s.response.updateResponse)};break;case 4:s.response={oneofKind:"configurationResponse",configurationResponse:D.internalBinaryRead(e,e.uint32(),t,s.response.configurationResponse)};break;case 5:s.response={oneofKind:"setHatImageResponse",setHatImageResponse:B.internalBinaryRead(e,e.uint32(),t,s.response.setHatImageResponse)};break;case 6:s.response={oneofKind:"getDgsrImageValidationResultResponse",getDgsrImageValidationResultResponse:L.internalBinaryRead(e,e.uint32(),t,s.response.getDgsrImageValidationResultResponse)};break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){"invalidCommandResponse"===e.response.oneofKind&&I.internalBinaryWrite(e.response.invalidCommandResponse,n.tag(1,o.O0.LengthDelimited).fork(),t).join(),"firmwareDetailsResponse"===e.response.oneofKind&&E.internalBinaryWrite(e.response.firmwareDetailsResponse,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),"updateResponse"===e.response.oneofKind&&j.internalBinaryWrite(e.response.updateResponse,n.tag(3,o.O0.LengthDelimited).fork(),t).join(),"configurationResponse"===e.response.oneofKind&&D.internalBinaryWrite(e.response.configurationResponse,n.tag(4,o.O0.LengthDelimited).fork(),t).join(),"setHatImageResponse"===e.response.oneofKind&&B.internalBinaryWrite(e.response.setHatImageResponse,n.tag(5,o.O0.LengthDelimited).fork(),t).join(),"getDgsrImageValidationResultResponse"===e.response.oneofKind&&L.internalBinaryWrite(e.response.getDgsrImageValidationResultResponse,n.tag(6,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const W=new U},2281:(e,n,t)=>{t.d(n,{L_:()=>W.L_,OH:()=>s,_T:()=>g._,DW:()=>H,N:()=>P,Tu:()=>B,PS:()=>U,Zx:()=>X,C_:()=>z,fz:()=>Y,EV:()=>ee,vC:()=>Z,yy:()=>p.yy,xk:()=>j,QH:()=>E});var o=t(6540),a=t(4848);const s=e=>{const n=(0,a.jsx)("div",{slot:"activate",children:(0,a.jsx)("button",{color:"primary",children:e.label})},"activate"),t=(0,a.jsx)("span",{slot:"unsupported",children:"Sorry - your browser isn't supported. You will need to use Google Chrome or Microsoft Edge to connect or install instead."},"unsupported"),s=(0,a.jsx)("span",{slot:"not-allowed",children:"Not allowed on HTTP (requires HTTPS connection)"},"not-allowed"),i=o.createElement("esp-web-install-button",{manifest:e.manifestPath,children:[n,t,s]});return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("p",{children:e.instructionsText}),i]})};var i=t(8287),r=t(2280);const l=e=>{let{obj:n}=e;return(0,a.jsx)("ul",{children:Object.entries(n).map((e=>{let[n,t]=e;return(0,a.jsx)("li",{children:(0,a.jsx)(d,{name:n,value:t},n)},n)}))})},m=e=>{let{arr:n}=e;return(0,a.jsx)("li",{children:n.map(((e,n)=>(0,a.jsx)(d,{name:n.toString(),value:e})))})},d=e=>{let{name:n,value:t}=e;switch((0,r.V)(t)){case"object":return(0,a.jsxs)(a.Fragment,{children:[n,(0,a.jsx)(l,{obj:t})]});case"array":return(0,a.jsxs)(a.Fragment,{children:[n,(0,a.jsx)(m,{arr:t})]})}return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[n,": ",t?.valueOf().toString()]})})},c=e=>{const n=e.messageData;return n?(0,a.jsx)(d,{name:"",value:n}):(0,a.jsxs)("div",{children:["Invalid data to convert to JSON for ",e.messageType.typeName]})};var g=t(9260),p=t(2046),u=t(6025),h=t(8774);const f=e=>{const n=(0,u.A)("qroma-io/sendAppMessage/#/"+e.commandAsBase64);return(0,a.jsx)(h.A,{to:n,children:e.commandAsBase64})};var y=t(3225);const w=e=>{if("scalar"===e.kind)return(e=>{switch(e){case y.LN.BOOL:return!1;case y.LN.STRING:return"";case y.LN.DOUBLE:case y.LN.FLOAT:case y.LN.INT64:case y.LN.UINT64:case y.LN.INT32:case y.LN.FIXED64:case y.LN.FIXED32:case y.LN.UINT32:case y.LN.SFIXED32:case y.LN.SFIXED64:case y.LN.SINT32:case y.LN.SINT64:return 0;case y.LN.BYTES:return[]}})(e.T);if("enum"===e.kind){const t=e.T()[1];let o;for(var n in t)void 0===o&&(o=parseInt(n));return o}if("message"===e.kind){return C(e.T())}throw Error("Unsupported field kind: "+e.kind)},C=e=>{const n={},t=e.fields,o=[];return t.forEach((e=>{if(void 0!==e.oneof){if(void 0===o.find((n=>n===e.oneof))){if(void 0===Object.keys(n).find((n=>n===e.name))){const t=w(e);n[e.name]=t}o.push(e.oneof)}}else{const t=w(e);n[e.name]=t}})),n},k=e=>(0,a.jsxs)("fieldset",{children:[(0,a.jsx)("input",{type:"checkbox",id:e.field.name,name:e.field.name,defaultChecked:e.value,onChange:n=>{e.updateFieldValue(n.target.checked)}}),(0,a.jsxs)("label",{htmlFor:e.field.name,children:[e.field.name," [",T(e.field.T),"]"]}),(0,a.jsx)("br",{})]}),b=e=>(0,a.jsxs)("div",{children:[e.field.name," [",T(e.field.T),"]",(0,a.jsx)("input",{onChange:n=>{e.updateFieldValue(n.target.value)},value:e.value})]}),R=e=>{const[n,t]=(0,o.useState)(e.value.toString()),[s,i]=(0,o.useState)(!0),[r,l]=(0,o.useState)(0);return(0,a.jsxs)("div",{children:[e.field.name," [",T(e.field.T),"]",(0,a.jsx)("input",{onChange:e=>{t(e.target.value);try{const n=parseFloat(e.target.value);i(!0),l(n)}catch(e){i(!1)}},onBlur:n=>{try{const t=parseFloat(n.target.value);e.updateFieldValue(t),i(!0),l(t)}catch(n){e.updateFieldValue(r),i(!0)}},value:n}),s?"":"*** (will set to "+r+" unless valid value entered)"]})},S=e=>{const[n,t]=(0,o.useState)(e.value.toString()),[s,i]=(0,o.useState)(!0),[r,l]=(0,o.useState)(0);return(0,a.jsxs)("div",{children:[e.field.name," [",T(e.field.T),"]",(0,a.jsx)("input",{onChange:n=>{t(n.target.value);try{const t=parseInt(n.target.value);if(!e.unsigned)return void i(!0);t>0?(i(!0),l(t)):i(!1)}catch(n){i(!1)}},onBlur:n=>{try{const t=parseInt(n.target.value);if(!e.unsigned)return e.updateFieldValue(t),i(!0),void l(t);e.unsigned&&t>0?(e.updateFieldValue(t),l(t)):e.updateFieldValue(r)}catch(n){}t(r),i(!0)},value:n}),s?"":"*** (will set to "+r+" unless valid value entered)"]})},T=e=>{switch(e){case y.LN.DOUBLE:return"double";case y.LN.FLOAT:return"float";case y.LN.INT64:return"int64";case y.LN.UINT64:return"uint64";case y.LN.INT32:return"int32";case y.LN.FIXED64:return"fixed64";case y.LN.FIXED32:return"fixed32";case y.LN.BOOL:return"bool";case y.LN.STRING:return"string";case y.LN.BYTES:return"bytes";case y.LN.UINT32:return"uint32";case y.LN.SFIXED32:return"sfixed32";case y.LN.SFIXED64:return"sfixed64";case y.LN.SINT32:return"sint32";case y.LN.SINT64:return"sint64"}},x=e=>{if(void 0===e.value&&(console.log("VALUE UNDEFINED IN MessageScalarFieldInputComponent FOR "+e.field.name),console.log(e)),"scalar"!==e.field.kind)return(0,a.jsxs)("div",{children:["Non-scalar input field provided: ",e.field.name]});const n=n=>{e.updateFieldInParent(e.field.name,n)};switch(e.field.T){case y.LN.BOOL:return(0,a.jsx)(k,{value:e.value,field:e.field,updateFieldValue:n});case y.LN.STRING:return(0,a.jsx)(b,{value:e.value,field:e.field,updateFieldValue:n});case y.LN.FLOAT:case y.LN.DOUBLE:return(0,a.jsx)(R,{value:e.value,field:e.field,updateFieldValue:n});case y.LN.UINT32:case y.LN.UINT64:return(0,a.jsx)(S,{value:e.value,field:e.field,updateFieldValue:n,unsigned:!0});case y.LN.INT64:case y.LN.INT32:case y.LN.FIXED64:case y.LN.FIXED32:case y.LN.SFIXED32:case y.LN.SFIXED64:case y.LN.SINT32:case y.LN.SINT64:return(0,a.jsx)(S,{value:e.value,field:e.field,updateFieldValue:n})}return(0,a.jsxs)("div",{children:[e.field.name," [",T(e.field.T),"] --- Unsupported scalar field"]})},N=e=>{const n=e.enumInfo,t=n[0],o=n[1],s=[];for(const a in o)try{if(Number.isNaN(parseInt(a)))continue;const e=parseInt(a),n=o[e];s.push({enumInt:e,valueName:n})}catch(m){}const i=n=>{const t=n.target.value;let o=s.find((e=>e.valueName===t)).enumInt;console.log(s),console.log("NEW VALUE: "+t),console.log(o),e.updateFieldInParent(t,o)},r=e.field.name+"-"+t,l=e=>r+"-"+e.valueName;return(0,a.jsx)("fieldset",{style:{marginLeft:20},children:s.map((n=>(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"radio",name:r,id:l(n),value:n.valueName,onChange:i,defaultChecked:e.value===n.enumInt}),(0,a.jsxs)("label",{htmlFor:l(n),children:[n.valueName," [",n.enumInt,"]"]})]},n.valueName)))})},v=e=>{const n=e.field;if("enum"!==n.kind)return(0,a.jsxs)("div",{children:["Non-enum input field provided: ",n.name]});const t=n.T();return(0,a.jsxs)("fieldset",{children:[n.name," [",n.kind,": ",t[0],"] -- ",e.value,(0,a.jsx)(N,{field:e.field,enumInfo:t,updateFieldInParent:(t,o)=>{console.log("NEW ENUM VALUE: "+o),e.updateFieldInParent(n.name,o)},value:e.value})]})},I=e=>{const n=e.oneofValue.oneofKind,t=e.allFieldsInParent.find((e=>e.name===n)),o=e.allFieldsInParent.filter((n=>n.oneof===e.oneofFieldName)),s=(0,a.jsx)("select",{value:n,onChange:n=>{const o=n.target.value;var a=e.allFieldsInParent.find((e=>e.name===o));const s=w(a);e.setActiveOneofFieldInParentMessage(t,a,s)},children:o.map((e=>(0,a.jsxs)("option",{value:e.name,children:[e.name," [",e.no,"]"]},e.name)))});let i=(0,a.jsx)(a.Fragment,{});switch(t.kind){case"enum":const o=e.oneofValue[n];i=(0,a.jsx)(v,{field:t,isFieldUsedAsOneof:!0,value:o,updateFieldInParent:(n,o)=>((n,t)=>{console.log("QromaPbOneofContainerComponent - ENUM ON CHANGE"),console.log(n),console.log(t),e.updateFieldValueInParentMessage(n,t)})(t,o)},t.name);break;case"scalar":const s=e.oneofValue[n];i=(0,a.jsx)(x,{field:t,isFieldUsedAsOneof:!0,value:s,updateFieldInParent:(n,o)=>{return a=t,s=o,void e.updateFieldValueInParentMessage(a,s);var a,s}},t.name);break;case"message":const r=e.oneofValue[n],l=r[t.name];i=(0,a.jsx)(F,{messageName:t.name,messageType:t.T(),messageValue:r,messageValueJsonData:l,fieldInParent:t,updateFieldValueInParentMessage:(n,o)=>((n,o)=>{let a;"message"===n.kind?(a=o,e.updateFieldValueInParentMessage(n,a)):(a={[n.name]:o},e.updateFieldValueInParentMessage(t,a)),e.updateFieldValueInParentMessage(t,a)})(n,o),setActiveOneofFieldInParentMessage:(n,o,a)=>((n,o,a)=>{console.log("QromaPbOneofContainerComponent - ACTIVE SUB ONE OF ON CHANGE");const s={[o.name]:a};delete s[n.name],console.log("SETTING VALUE - "+o.name),console.log(s),e.setActiveOneofFieldInParentMessage(t,o,a)})(n,o,a)},t.name);break;default:throw new Error("Unhandled field kind")}return(0,a.jsx)("div",{children:(0,a.jsxs)("fieldset",{style:{backgroundColor:"lightblue"},children:[e.oneofFieldName," [oneof]",s,(0,a.jsxs)("div",{children:["ONEOF: ",e.oneofFieldName," [",n,"] - ",JSON.stringify(e.oneofValue),i]})]})})},F=e=>{void 0===e.messageValue&&(console.log("UNDEFINED MESSAGE VALUE IN PB MESSAGE 2 COMPONENT"),console.log(e.messageName));const n=(n,t)=>{if("__rootMessage__"===e.messageName)e.updateFieldValueInParentMessage(n,t);else{const o=e.messageType.toJsonString(e.messageValue),a={...JSON.parse(o),[n.name]:t};e.updateFieldValueInParentMessage(e.fieldInParent,a)}},t=(n,t,o)=>{if(console.log("setActiveOneofField() IN QromaPbMessageComponent: "+e.messageType.typeName),console.log(e),console.log(n),console.log(t),console.log(o),console.log("QROMA PB MESSAGE UPDATE - IN setActiveOneofInMessage() FOR NON MESSAGE"),console.log(o),"__rootMessage__"===e.messageName)e.setActiveOneofFieldInParentMessage(n,t,o);else{const a=e.messageType.toJsonString(e.messageValue),s=JSON.parse(a);if(console.log(JSON.parse(a)),"message"===t.kind){console.log("QROMA NONROOT MESSAGE UPDATE - IN setActiveOneofInMessage() FOR MESSAGE");const a={...s,[t.name]:o};delete a[n.name],console.log(s),console.log(a),e.updateFieldValueInParentMessage(e.fieldInParent,a)}else{console.log("QROMA PB NONROOT MESSAGE UPDATE - IN setActiveOneofInMessage() FOR NONMESSAGE"),console.log(o);const a={...s,[t.name]:o};delete a[n.name],e.updateFieldValueInParentMessage(e.fieldInParent,a)}}},o=[],s=[];return e.messageType.fields.forEach((i=>{if((e=>void 0!==e.oneof)(i)){if(void 0===s.find((e=>e===i.oneof))){const r=e.messageValue[i.oneof];o.push((0,a.jsx)(I,{allFieldsInParent:e.messageType.fields,oneofFieldName:i.oneof,oneofValue:r,updateFieldValueInParentMessage:n,setActiveOneofFieldInParentMessage:t},i.name)),s.push(i.oneof)}}else switch(i.kind){case"scalar":const s=e.messageValue[i.name];o.push((0,a.jsx)(x,{field:i,isFieldUsedAsOneof:!1,value:s,updateFieldInParent:(e,t)=>((e,t,o)=>{n(e,o)})(i,0,t)},i.name));break;case"enum":o.push((0,a.jsx)(v,{field:i,isFieldUsedAsOneof:!1,value:e.messageValue[i.name],updateFieldInParent:(e,t)=>((e,t,o)=>{n(e,o)})(i,0,t)},i.name));break;case"message":const r=e.messageValue[i.name],l=e.messageValue[i.name];o.push((0,a.jsx)(F,{messageName:i.name,messageType:i.T(),messageValue:r,messageValueJsonData:l,fieldInParent:i,updateFieldValueInParentMessage:(e,t)=>n(e,t),setActiveOneofFieldInParentMessage:t},i.name));break;default:return(0,a.jsxs)("div",{children:[i.name," - [",i.name,"]"]},i.name)}})),(0,a.jsx)("div",{children:(0,a.jsxs)("fieldset",{children:[e.messageName," [",e.messageType.typeName,"] +++",(0,a.jsx)("div",{style:{marginLeft:20},children:o})]})})},D=e=>{const n=e.requestMessageType;console.log("REQUEST MESSAGE TYPE"),console.log(n);const t=C(e.requestMessageType),[s,r]=(0,o.useState)(t),l=(()=>{try{return e.requestMessageType.fromJson(s)}catch(n){throw console.log("Error trying to build message from root message JSON data"),console.log(e.requestMessageType),console.log(s),n}})(),m=e.qromaWebSerial.createQromaCommMessageForAppCommand(l),d=g._.toBinary(m),u=i.hp.from(d).toString("base64")+"\n",h=n=>{const t=n,o=e.requestMessageType.toBinary(t);return(0,p.Tg)(o)},y=e.qromaWebSerial.getConnectionState().isWebSerialConnected;console.log("isQromaWebSerialConnected: "+y);let w="";try{w=e.requestMessageType.toJsonString(e.requestMessageType.fromJson(s))}catch(b){console.log("ERROR SETTING APP COMMAND JSON STR"),console.log(b)}let k="";try{k=g._.toJsonString(m)}catch(b){console.log("ERROR SETTING QROMA COMM APP COMMAND JSON STR"),console.log(b)}console.log("ROOT MESSAGE VALUE"),console.log(l);return(0,a.jsxs)("div",{children:[(0,a.jsx)(F,{messageType:n,messageName:"__rootMessage__",messageValue:l,messageValueJsonData:s,fieldInParent:{},updateFieldValueInParentMessage:(n,t)=>{if(console.log("UPDATING ROOT MESSAGE VALUE IN "+e.responseMessageType.typeName),console.log(n),console.log(t),console.log("OLD ROOT MESSAGE"),console.log(s),void 0===Object.keys(s).find((e=>e===n.name)))throw new Error("UNABLE TO UPDATE ROOT VALUE FoR "+n.name);const o={...s,[n.name]:t};console.log("NEW ROOT MESSAGE"),console.log(o),r(o)},setActiveOneofFieldInParentMessage:(n,t,o)=>{if(console.log("ROOT MESSAGE UPDATE - IN setActiveOneofInRoot() FOR "+e.requestMessageType.typeName),console.log(n),console.log(t),console.log(o),"message"===t.kind){console.log("QROMA PB ROOT MESSAGE UPDATE - IN setActiveOneofInMessage() FOR MESSAGE");const e={...s,[t.name]:o};delete e[n.name],console.log(s),console.log(e),r(e)}else{console.log("QROMA PB ROOT MESSAGE UPDATE - IN setActiveOneofInMessage() FOR NONMESSAGE"),console.log(o);const e={...s,[t.name]:o};delete e[n.name],r(e)}}},n.typeName),(0,a.jsxs)("div",{children:["App Command: ",w]}),(0,a.jsxs)("div",{children:["App Command B64: ",h(l)]}),(0,a.jsxs)("div",{children:["App Command Link: ",(0,a.jsx)(f,{commandAsBase64:h(l)})]}),(0,a.jsxs)("div",{children:["QC Command: ",k]}),(0,a.jsxs)("div",{children:["QC Command B64: [",u,"]"]}),y?(0,a.jsx)("button",{onClick:()=>(async()=>{console.log("SEND COMMAND");const n=e.requestMessageType.fromJson(s),t=await e.qromaWebSerial.sendQromaAppCommand(n);console.log("REQUEST SENT"),console.log(t)})(),children:"Send Request"}):(0,a.jsx)("button",{onClick:()=>(console.log("START CONNECTION"),void e.qromaWebSerial.startMonitoring()),children:"Start Connection!"}),(0,a.jsx)("button",{onClick:()=>(()=>{const n=e.qromaWebSerial.createQromaCommMessageForAppCommand(l);console.log(n);const t=g._.toBinary(n);console.log(t);const o=i.hp.from(t).toString("base64")+"\n";console.log("APP MESSAGE B64"),console.log(o),console.log(o.length)})(),children:"Show Qroma Comm Message"}),(0,a.jsx)(c,{messageType:e.requestMessageType,messageData:l})]})};var O=t(4724);const E=(e,n)=>{if(!window)throw Error("Not running in a browser");let t=new Uint8Array;const o=e=>{t=e};console.log("CALLING useQromaWebSerial");const a=(0,O.a)((n=>{let a=(0,p.KC)(t,n);for(;;){let n=a.findIndex((e=>10===e));if(-1===n)return void o(a);if(0!==n)try{const t=a.slice(0,n);a=a.slice(n,a.length);const o=(new TextDecoder).decode(t),s=i.hp.from(o,"base64"),r=g.U.fromBinary(s);e(r)}catch(s){}else a=a.slice(1,a.length)}o(a)}),n);return{startMonitoring:async()=>{try{console.log("COMM WEB SERIAL - START"),a.startMonitoring(),console.log("COMM WEB SERIAL - START - CONNECTED")}catch(e){console.log("COMM WEB SERIAL - ON CONNECTION FALSE"),console.log(e)}},getConnectionState:a.getConnectionState,stopMonitoring:a.stopMonitoring,sendQromaCommCommand:async e=>{if(!a.getConnectionState().isWebSerialConnected)return console.log("sendQromaCommCommand - CAN'T SEND COMMAND - NO CONNECTION"),void console.log(e);const n=g._.toBinary(e);console.log(n);const t=i.hp.from(n).toString("base64")+"\n";console.log("TO DEVICE >> "+t),console.log(t.length),await a.sendString(t)},qromaWebSerial:a}};var A=t(7472);const j=e=>{if(!window)throw Error("Not running in a browser");console.log("CALLING useQromaCommWebSerial");const n=E((n=>{if("coreResponse"===n.response.oneofKind)n.response.coreResponse.oneofKind;else if("appResponseBytes"===n.response.oneofKind){const o=n.response.appResponseBytes;try{const n=e.responseMessageType.fromBinary(o);if(void 0===n)return console.log("UNDEFINED APP RESPONSE BYTES"),void console.log(o);e.onQromaAppResponse(n)}catch(t){console.log("APP RESPONSE PARSE ERR"),console.log(t)}}}),(n=>{e.onPortRequestResult({success:n.isWebSerialConnected})}));return{startMonitoring:n.startMonitoring,getConnectionState:n.getConnectionState,stopMonitoring:n.stopMonitoring,sendQromaAppCommand:async t=>{if(void 0===e.commandMessageType)throw Error("sendQromaAppCommand() failure - no commandMessageType provided on IUseQromaAppWebSerialInputs");const o={command:{oneofKind:"appCommandBytes",appCommandBytes:e.commandMessageType.toBinary(t)}};n.sendQromaCommCommand(o)},createQromaCommMessageForAppCommand:n=>(0,A._)(n,e.commandMessageType)}},P=e=>{const[n,t]=(0,o.useState)(e.responseMessageType.create()),s={onPortRequestResult:e=>{console.log("PORT REQUEST RESULT "+e.success)},responseMessageType:e.responseMessageType,onQromaCommResponse:e=>{console.log("QromaCommMonitor - onQromaCommResponse"),console.log(e)},onQromaAppResponse:e=>{console.log("QromaCommMonitor - onQromaAppResponse"),t(e)}},i=j(s);return null===i?(0,a.jsx)(a.Fragment,{children:"Serial not supported"}):(0,a.jsxs)("div",{children:["Qroma comm monitor",(0,a.jsx)("button",{onClick:async()=>{i.startMonitoring()},children:"Start monitor"}),(0,a.jsx)("button",{onClick:()=>{i.stopMonitoring()},children:"Stop monitor"}),(0,a.jsx)(c,{messageType:e.responseMessageType,messageData:n})]})},B=e=>{const[n,t]=(0,o.useState)(e.responseMessageType.create()),[s,i]=(0,o.useState)(!1),r={onQromaAppResponse:e=>{console.log("QromaRequestForm - onQromaAppResponse!!"),console.log(e),t(e)},onQromaCommResponse:e=>{console.log("QromaRequestForm - onQromaCommResponse!!"),console.log(e)},commandMessageType:e.requestMessageType,responseMessageType:e.responseMessageType,onPortRequestResult:e=>{console.log("PORT REQUEST RESULT"),console.log(e),e.success?i(!0):i(!1)}},l=j(r);return(0,a.jsxs)(a.Fragment,{children:[e.requestMessageType.typeName," => ",e.responseMessageType.typeName,(0,a.jsx)(D,{requestMessageType:e.requestMessageType,responseMessageType:e.responseMessageType,qromaWebSerial:l}),(0,a.jsxs)("div",{children:["App Response: ",JSON.stringify(n)]})]})};var $=t(4870);const L=e=>{const n=e.qromaWebSerial;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:()=>{(()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:$.PT.Qc_Nac_GetQromaCoreConfig}};n.sendQromaCoreCommand(e)})()},children:"Get Core config"})}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:()=>{(()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:$.PT.Qc_Nac_GetQromaCoreFirmwareDetails}};n.sendQromaCoreCommand(e)})()},children:"Get firmware details"})}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:()=>{(()=>{const e={command:{oneofKind:"restartQromaDevice",restartQromaDevice:{areYouSure:window.confirm("Are you sure you want to restart?")}}};n.sendQromaCoreCommand(e)})()},children:"Restart"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>{(async()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:$.PT.Qc_Nac_EnableCoreHeartbeat}};n.sendQromaCoreCommand(e)})()},children:"Enable heartbeat"}),(0,a.jsx)("button",{onClick:()=>{(async()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:$.PT.Qc_Nac_DisableCoreHeartbeat}};n.sendQromaCoreCommand(e)})()},children:"Disable heartbeat"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>{(async()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:$.PT.Qc_Nac_EnableAllLogging}};n.sendQromaCoreCommand(e)})()},children:"Enable logging"}),(0,a.jsx)("button",{onClick:()=>{(async()=>{const e={command:{oneofKind:"noArgCommand",noArgCommand:$.PT.Qc_Nac_DisableLogging}};n.sendQromaCoreCommand(e)})()},children:"Disable logging"})]})]})},U=e=>{const[n,t]=(0,o.useState)($.PF.create()),[s,i]=(0,o.useState)($.PF.create()),[r,l]=(0,o.useState)(!1),m=(e=>{if(!window)throw Error("Not running in a browser");const n=e=>{const n={command:{oneofKind:"coreCommand",coreCommand:e}};return console.log("QROMA COMM COMMAND FOR QROMA CORE READY"),console.log(n),console.log(e),n};console.log("CALLING useQromaCoreWebSerial");const t=E((n=>{if(console.log("QromaCoreWebSerial - onData"),console.log(n),"coreResponse"===n.response.oneofKind){const t=n.response.coreResponse;console.log("CORE RESPONSE"),console.log(t),e.onQromaCoreResponse(t)}}),(n=>{e.onPortRequestResult({success:n.isWebSerialConnected})}));return{startMonitoring:t.startMonitoring,getConnectionState:t.getConnectionState,stopMonitoring:t.stopMonitoring,sendQromaCoreCommand:async e=>{const o=n(e);t.sendQromaCommCommand(o)},createQromaCommMessageForCoreCommand:n}})({onQromaCoreResponse:e=>{console.log("QromaCoreDeviceApp - onQromaCoreResponse!!"),"heartbeat"===e.response.oneofKind?i(e):t(e)},onPortRequestResult:e=>{e.success!==r?(console.log("PORT REQUEST RESULT"),console.log(e),console.log(r),e.success?l(!0):l(!1)):console.log("don't need to update port request result: "+r)}}),d=m.getConnectionState().isWebSerialConnected;return(0,a.jsxs)(a.Fragment,{children:[$.tp.typeName," => ",$.PF.typeName,d?(0,a.jsx)(L,{qromaWebSerial:m}):(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:()=>(console.log("START CONNECTION"),void m.startMonitoring()),children:"Start Connection!"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:["Core Response: ",JSON.stringify(n)]}),(0,a.jsxs)("div",{children:["Heartbeat Response: ",JSON.stringify(s)]})]})]})};t(3033);var W=t(7506);const M=e=>{console.log(e.itemPath);const n=(0,u.A)("qroma-io/showQromaFile/#"+e.itemPath);return(0,a.jsx)(h.A,{to:n,children:e.itemPath})},Q=e=>{const n=e.dirPath,t=e.dirItem;console.log("FILEPATH"),console.log(n),console.log(t.name);const o=n.endsWith("/")?"":"/",s=n+o+t.name;console.log("FILEPATH ITEM - "+s);const i=e.qromaCommFileSystemApi;return(0,a.jsxs)("li",{children:["f - ",s,(0,a.jsx)("button",{onClick:()=>(async e=>{await i.rmFile(e)})(s),children:"Delete"}),(0,a.jsx)("button",{onClick:()=>(async n=>{const t=await e.qromaCommFileSystemApi.getFileContents(n);if(void 0===t)return void console.log("Unable to read file contents for "+n);const o=(new TextDecoder).decode(t.fileBytes);alert(o)})(s),children:"Show"}),(0,a.jsx)("button",{onClick:()=>(async e=>{const n=await i.getFileDetailsRx(e);void 0!==n?alert("File: "+n.fileData.filename+"\n\nSize: "+n.fileData.filesize+" bytes\n\nChecksum: "+n.fileData.checksum):console.log("Unable to read file details for "+e)})(s),children:"Details"}),(0,a.jsx)("button",{onClick:()=>(async e=>{console.log("DOWNLOAD "+e);const n=await i.downloadFileContents(e);if(null===n)return void console.log("doFileDownload() failed for "+e);const t=e.lastIndexOf("/"),o=-1!==t?e.slice(t+1):e;console.log(o);const a=new Blob([n],{type:"application/octet-stream"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=o,document.body.appendChild(r),r.click(),URL.revokeObjectURL(s),document.body.removeChild(r)})(s),children:"Download"}),(0,a.jsx)(M,{itemPath:s})]})},G=e=>{const n=(0,u.A)("qroma-io/showQromaDir/#"+e.navToDirPath);return(0,a.jsx)(h.A,{to:n,children:e.navToDirPath})},_=e=>{const n=e.dirPath,t=e.dirItem,o=n.endsWith("/")?"":"/",s=n+o+t.name;console.log("DIRPATH ITEM - "+s);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("li",{children:["d - ",s,(0,a.jsx)("button",{onClick:()=>(async n=>{const t=prompt("Enter file name");if(null===t)return;const o=prompt("Enter file content");if(null===o)return;const a=n.endsWith("/")?"":"/",s=n+a+t;console.log("CREATING FILE"),console.log(s);const i=(new TextEncoder).encode(o);await e.qromaCommFileSystemApi.writeFileContents(s,i)})(s),children:"Create File"}),(0,a.jsx)(G,{navToDirPath:s})]})})},K=e=>{const{qromaCommFileSystemApi:n}={...e},[t,s]=(0,o.useState)([]),[i,r]=(0,o.useState)("...");console.log("RENDERING QromaCommFileExplorerUiComponent");const l=n.connectionState.isWebSerialConnected;return l?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:["QromaCommFileExplorerUiComponent2 - ",l?"CONNECTED":"NOT CONNECTED"]}),(0,a.jsx)("button",{onClick:()=>(async e=>{console.log("LISTING DIR PATH");const t=await n.listDir(e);t&&t.success&&(console.log("UPDATING DIR ITEMS"),s(t.dirItems),r(t.dirPath)),console.log("DIR RESULT"),console.log(t)})("/"),children:"LIST ROOT DIR"}),(0,a.jsx)("button",{onClick:()=>(async()=>{const e=prompt("Enter directory name");if(null!==e){const t=e.startsWith("/")?"":"/";await n.mkDir(t+e)}})(),children:"CREATE DIR"}),(0,a.jsx)("button",{onClick:()=>(async()=>{const e=prompt("Enter file path");if(null===e)return;const t=prompt("Enter file content");if(null===t)return;const o=i.endsWith("/")?"":"/",a=i+o+e,s=(new TextEncoder).encode(t);await n.writeFileContents(a,s)})(),children:"CREATE FILE"}),(0,a.jsxs)("div",{children:["DIR PATH: ",i,(0,a.jsx)("ul",{children:t.map((e=>e.dirItemType===W.L_.DIT_DIR?(0,a.jsx)(_,{dirPath:i,dirItem:e,qromaCommFileSystemApi:n},e.name):(0,a.jsx)(Q,{dirPath:i,dirItem:e,qromaCommFileSystemApi:n},e.name)))})]})]}):(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:()=>(async()=>{n.init()})(),children:"START EXPLORER"})})};var V=t(2227);const H=e=>{console.log("RE-RENDERING QromaCommFileExplorerComponent");const n=(0,V.d)();return(0,a.jsx)(K,{qromaCommFileSystemApi:n})};var q=t(6347);const X=e=>{const n=(0,q.zy)(),t=e.qromaCommFileSystemApi,o=n.hash,s=/#(.*)!(.*)/gm.exec(o),i=s[1],r=s[2];if(void 0===i||void 0===r)return(0,a.jsxs)("div",{children:["Invalid Qroma file path or content. Paths must start with ",(0,a.jsx)("b",{children:"#/"})," and end with ",(0,a.jsx)("b",{children:"!"}),". Content should then follow, encoded in Base 64."]});const l=t.connectionState.isWebSerialConnected,m=t.connectionState.isWebSerialConnected;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:"QromaIoAddQromaFileComponent!!!"}),(0,a.jsxs)("div",{children:["Going to write bytes below from Base64 to ",(0,a.jsx)("b",{children:i})]}),(0,a.jsxs)("div",{children:["Serial Connected? ",l?"Yes":"No"," / ",m?"Yes":"No"]}),l?(0,a.jsx)("button",{onClick:()=>(async()=>{const e=(0,p.R5)(r);await t.writeFileContents(i,e)})(),children:"Add File"}):(0,a.jsx)("button",{onClick:()=>{t.init()},children:"Start Connection!"}),(0,a.jsx)("div",{children:r})]})},z=e=>{const[n,t]=(0,o.useState)(e.responseMessageType.create()),[s,i]=(0,o.useState)(!1),r={onQromaAppResponse:e=>{console.log("QromaIoSendAppMessageComponent - onQromaAppResponse!!"),console.log(e),t(e)},onQromaCommResponse:e=>{console.log("QromaRequestForm - onQromaCommResponse!!"),console.log(e)},commandMessageType:e.requestMessageType,responseMessageType:e.responseMessageType,onPortRequestResult:e=>{e.success?i(!0):i(!1)}},l=j(r),m=(0,q.zy)();console.log(m);const d=m.hash;if(!d.startsWith("#/"))return(0,a.jsxs)("div",{children:["Invalid Base 64 message path. Paths must start with ",(0,a.jsx)("b",{children:"#/"}),"."]});const c=d.substring(2),g=(0,p.R5)(c),u=e.requestMessageType.fromBinary(g),h=(0,A._)(u,e.requestMessageType);console.log(h);const f=l.getConnectionState().isWebSerialConnected;let y="";try{y=e.requestMessageType.toJsonString(u)}catch(w){console.log("ERROR SETTING APP COMMAND JSON STR"),console.log(w)}return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:["App Command: ",y]}),(0,a.jsxs)("div",{children:["B64Content: ",c]}),(0,a.jsxs)("div",{children:["Location: ",m.pathname]}),(0,a.jsxs)("div",{children:["Hash: ",(0,a.jsx)("b",{children:m.hash})]}),(0,a.jsx)("div",{children:"QromaIoSendAppMessageComponent!!!"}),f?(0,a.jsx)("button",{onClick:()=>(async()=>{console.log("SEND B64: "+c),console.log("SEND OBJECT"),console.log(u);const e=await l.sendQromaAppCommand(u);console.log("REQUEST SENT"),console.log(e)})(),children:"Send App Message"}):(0,a.jsx)("button",{onClick:()=>{l.startMonitoring()},children:"Start Connection!"}),(0,a.jsxs)("div",{children:["App Response: ",JSON.stringify(n)]})]})},Y=e=>{console.log("HERE... QromaIoSendQromaCommMessageComponent");const n=E((e=>{console.log("onQromaCommResponse"),console.log(e)}),(e=>{console.log("onConnectionChange"),console.log(e)})),t=(0,q.zy)();console.log(t);const o=t.hash;if(!o.startsWith("#/"))return(0,a.jsxs)("div",{children:["Invalid Base 64 message path. Paths must start with ",(0,a.jsx)("b",{children:"#/"}),"."]});const s=o.substring(2),i=(0,p.R5)(s),r=g._.fromBinary(i);if(void 0===r)return(0,a.jsx)("div",{children:"Could not convert Base 64 to valid QromaCommCommand object."});const l=g._.toJsonString(r),m=n.getConnectionState().isWebSerialConnected,d=n.getConnectionState().isWebSerialConnected;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:["Serial Connected? ",m?"Yes":"No"," / ",d?"Yes":"No"]}),(0,a.jsxs)("div",{children:["B64Content: ",s]}),(0,a.jsxs)("div",{children:["Location: ",t.pathname]}),(0,a.jsxs)("div",{children:["Hash: ",(0,a.jsx)("b",{children:t.hash})]}),(0,a.jsxs)("div",{children:["JSON: ",l]}),d?(0,a.jsx)("button",{onClick:()=>(async()=>{console.log("SEND B64: "+s);const e=await n.sendQromaCommCommand(r);console.log("REQUEST SENT"),console.log(e)})(),children:"Send Qroma Comm Message"}):(0,a.jsx)("button",{onClick:()=>{n.startMonitoring()},children:"Start Connection!"})]})},J=e=>{const[n,t]=(0,o.useState)(""),s=(0,q.zy)();console.log(s);const i=s.hash,r=i.startsWith("#/"),l=i.substring(1);if(!r)return(0,a.jsxs)("div",{children:["Invalid Qroma file path. Paths must start with ",(0,a.jsx)("b",{children:"#/"}),"."]});const m=(0,V.d)(),d=m.connectionState.isWebSerialConnected,c=async e=>{console.log("SHOWING FILE CONTENTS FOR "+e);const n=await m.getFileContents(e);if(void 0===n)return void console.log("Unable to read file contents for "+e);console.log("FILE CONTENTS"),console.log(n);const o=(new TextDecoder).decode(n.fileBytes);console.log("FILE CONTENTS"),console.log(o),t((0,p.Tg)(o))};return(0,o.useEffect)((()=>{(async()=>{await c(l)})()}),[l]),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:"QromaIoShowQromaFileComponent!!!"}),(0,a.jsxs)("div",{children:["FILEPATH: ",l]}),d?(0,a.jsx)("button",{onClick:()=>c(l),children:"Show contents"}):(0,a.jsx)("button",{onClick:()=>(m.init(),void console.log("qromaCommFileSystemApi - INIT CALLED")),children:"Start Connection!"}),(0,a.jsx)("div",{children:"Base 64 Content"}),(0,a.jsx)("div",{children:n})]})},Z=()=>(0,a.jsx)(J,{}),ee=e=>{const[n,t]=(0,o.useState)([]),[s,i]=(0,o.useState)("..."),r=(0,q.zy)();console.log(r);const l=r.hash,m=l.startsWith("#/"),d=l.substring(1);if(!m)return(0,a.jsxs)("div",{children:["Invalid Qroma file path. Paths must start with ",(0,a.jsx)("b",{children:"#/"}),"."]});const c=(0,V.d)(),g=c.connectionState.isWebSerialConnected;console.log("DIRECTORY CONTENTS"),console.log(n);const p=async e=>{console.log("SHOWING DIR CONTENTS FOR "+e);const n=await c.listDir(e);n&&n.success&&(t(n.dirItems),i(n.dirPath)),console.log("DIR RESULT"),console.log(n)};return(0,o.useEffect)((()=>{(async()=>{await p(d)})()}),[d]),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:"QromaIoShowQromaDirComponent!!!"}),(0,a.jsxs)("div",{children:["DIRPATH: ",d]}),g?(0,a.jsx)("button",{onClick:()=>p(d),children:"Show contents"}):(0,a.jsx)("button",{onClick:()=>(c.init(),void console.log("qromaCommFileSystemApi - INIT CALLED FROM SHOW QROMA DIR")),children:"Start Connection!"}),(0,a.jsxs)("div",{children:["Dir Contents [",d,"]"]}),n.map((e=>e.dirItemType===W.L_.DIT_DIR?(0,a.jsx)(_,{dirPath:s,dirItem:e,qromaCommFileSystemApi:c},e.name):(0,a.jsx)(Q,{dirPath:s,dirItem:e,qromaCommFileSystemApi:c},e.name)))]})}},7506:(e,n,t)=>{t.d(n,{L_:()=>l,NF:()=>V,TV:()=>q});var o=t(8899),a=t(3923),s=t(5336),i=t(3724),r=t(3033);let l=function(e){return e[e.DIT_NOT_SET=0]="DIT_NOT_SET",e[e.DIT_FILE=1]="DIT_FILE",e[e.DIT_DIR=2]="DIT_DIR",e}({}),m=function(e){return e[e.WFDSC_NOT_SET=0]="WFDSC_NOT_SET",e[e.WFDSC_SUCCESS=1]="WFDSC_SUCCESS",e[e.WFDSC_ERR_OPEN_FILE=2]="WFDSC_ERR_OPEN_FILE",e[e.WFDSC_ERR_CRC_MISMATCH=3]="WFDSC_ERR_CRC_MISMATCH",e}({});class d extends i.G{constructor(){super("DirItem",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"dirItemType",kind:"enum",T:()=>["DirItemType",l]},{no:3,name:"filesize",kind:"scalar",T:13}])}create(e){const n={name:"",dirItemType:0,filesize:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.name=e.string();break;case 2:s.dirItemType=e.int32();break;case 3:s.filesize=e.uint32();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.name&&n.tag(1,o.O0.LengthDelimited).string(e.name),0!==e.dirItemType&&n.tag(2,o.O0.Varint).int32(e.dirItemType),0!==e.filesize&&n.tag(3,o.O0.Varint).uint32(e.filesize);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const c=new d;class g extends i.G{constructor(){super("RmFileCommand",[{no:1,name:"filePath",kind:"scalar",T:9}])}create(e){const n={filePath:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.filePath=e.string();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.filePath&&n.tag(1,o.O0.LengthDelimited).string(e.filePath);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const p=new g;class u extends i.G{constructor(){super("RmFileResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"rmFileCommand",kind:"message",T:()=>p}])}create(e){const n={success:!1};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.success=e.bool();break;case 2:s.rmFileCommand=p.internalBinaryRead(e,e.uint32(),t,s.rmFileCommand);break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){!1!==e.success&&n.tag(1,o.O0.Varint).bool(e.success),e.rmFileCommand&&p.internalBinaryWrite(e.rmFileCommand,n.tag(2,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const h=new u;class f extends i.G{constructor(){super("RmDirCommand",[{no:1,name:"dirPath",kind:"scalar",T:9}])}create(e){const n={dirPath:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.dirPath=e.string();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.dirPath&&n.tag(1,o.O0.LengthDelimited).string(e.dirPath);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const y=new f;class w extends i.G{constructor(){super("RmDirResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"rmDirCommand",kind:"message",T:()=>y}])}create(e){const n={success:!1};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.success=e.bool();break;case 2:s.rmDirCommand=y.internalBinaryRead(e,e.uint32(),t,s.rmDirCommand);break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){!1!==e.success&&n.tag(1,o.O0.Varint).bool(e.success),e.rmDirCommand&&y.internalBinaryWrite(e.rmDirCommand,n.tag(2,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const C=new w;class k extends i.G{constructor(){super("MkDirCommand",[{no:1,name:"dirPath",kind:"scalar",T:9}])}create(e){const n={dirPath:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.dirPath=e.string();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.dirPath&&n.tag(1,o.O0.LengthDelimited).string(e.dirPath);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const b=new k;class R extends i.G{constructor(){super("MkDirResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"mkDirCommand",kind:"message",T:()=>b}])}create(e){const n={success:!1};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.success=e.bool();break;case 2:s.mkDirCommand=b.internalBinaryRead(e,e.uint32(),t,s.mkDirCommand);break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){!1!==e.success&&n.tag(1,o.O0.Varint).bool(e.success),e.mkDirCommand&&b.internalBinaryWrite(e.mkDirCommand,n.tag(2,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const S=new R;class T extends i.G{constructor(){super("ReportFileDataCommand",[{no:1,name:"filePath",kind:"scalar",T:9}])}create(e){const n={filePath:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.filePath=e.string();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.filePath&&n.tag(1,o.O0.LengthDelimited).string(e.filePath);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const x=new T;class N extends i.G{constructor(){super("ReportFileDataResponse",[{no:1,name:"fileStatus",kind:"enum",T:()=>["GetFileStatusCode",r.WH]},{no:2,name:"fileData",kind:"message",T:()=>r.HW}])}create(e){const n={fileStatus:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.fileStatus=e.int32();break;case 2:s.fileData=r.HW.internalBinaryRead(e,e.uint32(),t,s.fileData);break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let l=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,l)}}return s}internalBinaryWrite(e,n,t){0!==e.fileStatus&&n.tag(1,o.O0.Varint).int32(e.fileStatus),e.fileData&&r.HW.internalBinaryWrite(e.fileData,n.tag(2,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const v=new N;class I extends i.G{constructor(){super("ListDirContentsCommand",[{no:1,name:"dirPath",kind:"scalar",T:9},{no:2,name:"startsWithConstraint",kind:"scalar",T:9},{no:3,name:"endsWithConstraint",kind:"scalar",T:9}])}create(e){const n={dirPath:"",startsWithConstraint:"",endsWithConstraint:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.dirPath=e.string();break;case 2:s.startsWithConstraint=e.string();break;case 3:s.endsWithConstraint=e.string();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.dirPath&&n.tag(1,o.O0.LengthDelimited).string(e.dirPath),""!==e.startsWithConstraint&&n.tag(2,o.O0.LengthDelimited).string(e.startsWithConstraint),""!==e.endsWithConstraint&&n.tag(3,o.O0.LengthDelimited).string(e.endsWithConstraint);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const F=new I;class D extends i.G{constructor(){super("ListDirContentsResponse",[{no:1,name:"dirPath",kind:"scalar",T:9},{no:2,name:"success",kind:"scalar",T:8},{no:3,name:"dirItems",kind:"message",repeat:1,T:()=>c}])}create(e){const n={dirPath:"",success:!1,dirItems:[]};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.dirPath=e.string();break;case 2:s.success=e.bool();break;case 3:s.dirItems.push(c.internalBinaryRead(e,e.uint32(),t));break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.dirPath&&n.tag(1,o.O0.LengthDelimited).string(e.dirPath),!1!==e.success&&n.tag(2,o.O0.Varint).bool(e.success);for(let s=0;s<e.dirItems.length;s++)c.internalBinaryWrite(e.dirItems[s],n.tag(3,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const O=new D;class E extends i.G{constructor(){super("PrintDirContentsCommand",[{no:1,name:"dirPath",kind:"scalar",T:9}])}create(e){const n={dirPath:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.dirPath=e.string();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.dirPath&&n.tag(1,o.O0.LengthDelimited).string(e.dirPath);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}new E;class A extends i.G{constructor(){super("ResetFilesystemCommand",[{no:1,name:"dummy",kind:"scalar",T:8}])}create(e){const n={dummy:!1};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.dummy=e.bool();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){!1!==e.dummy&&n.tag(1,o.O0.Varint).bool(e.dummy);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const j=new A;class P extends i.G{constructor(){super("ResetFilesystemResponse",[{no:1,name:"success",kind:"scalar",T:8}])}create(e){const n={success:!1};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.success=e.bool();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){!1!==e.success&&n.tag(1,o.O0.Varint).bool(e.success);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const B=new P;class $ extends i.G{constructor(){super("GetFileContentsCommand",[{no:1,name:"filePath",kind:"scalar",T:9}])}create(e){const n={filePath:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.filePath=e.string();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.filePath&&n.tag(1,o.O0.LengthDelimited).string(e.filePath);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const L=new $;class U extends i.G{constructor(){super("GetFileContentsResponse",[{no:1,name:"statusCode",kind:"enum",T:()=>["GetFileStatusCode",r.WH]},{no:2,name:"fileData",kind:"message",T:()=>r.HW},{no:3,name:"fileBytes",kind:"scalar",T:12}])}create(e){const n={statusCode:0,fileBytes:new Uint8Array(0)};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.statusCode=e.int32();break;case 2:s.fileData=r.HW.internalBinaryRead(e,e.uint32(),t,s.fileData);break;case 3:s.fileBytes=e.bytes();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let l=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,l)}}return s}internalBinaryWrite(e,n,t){0!==e.statusCode&&n.tag(1,o.O0.Varint).int32(e.statusCode),e.fileData&&r.HW.internalBinaryWrite(e.fileData,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),e.fileBytes.length&&n.tag(3,o.O0.LengthDelimited).bytes(e.fileBytes);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const W=new U;class M extends i.G{constructor(){super("WriteFileDataCommand",[{no:1,name:"fileData",kind:"message",T:()=>r.HW},{no:2,name:"fileBytes",kind:"scalar",T:12}])}create(e){const n={fileBytes:new Uint8Array(0)};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.fileData=r.HW.internalBinaryRead(e,e.uint32(),t,s.fileData);break;case 2:s.fileBytes=e.bytes();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let l=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,l)}}return s}internalBinaryWrite(e,n,t){e.fileData&&r.HW.internalBinaryWrite(e.fileData,n.tag(1,o.O0.LengthDelimited).fork(),t).join(),e.fileBytes.length&&n.tag(2,o.O0.LengthDelimited).bytes(e.fileBytes);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const Q=new M;class G extends i.G{constructor(){super("WriteFileDataResponse",[{no:1,name:"statusCode",kind:"enum",T:()=>["WriteFileDataStatusCode",m]},{no:2,name:"command",kind:"message",T:()=>r.HW}])}create(e){const n={statusCode:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.statusCode=e.int32();break;case 2:s.command=r.HW.internalBinaryRead(e,e.uint32(),t,s.command);break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let l=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,l)}}return s}internalBinaryWrite(e,n,t){0!==e.statusCode&&n.tag(1,o.O0.Varint).int32(e.statusCode),e.command&&r.HW.internalBinaryWrite(e.command,n.tag(2,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const _=new G;class K extends i.G{constructor(){super("FileSystemCommand",[{no:1,name:"getFileContentsCommand",kind:"message",oneof:"command",T:()=>L},{no:2,name:"writeFileDataCommand",kind:"message",oneof:"command",T:()=>Q},{no:4,name:"reportFileDataCommand",kind:"message",oneof:"command",T:()=>x},{no:5,name:"rmFileCommand",kind:"message",oneof:"command",T:()=>p},{no:9,name:"listDirContentsCommand",kind:"message",oneof:"command",T:()=>F},{no:10,name:"mkDirCommand",kind:"message",oneof:"command",T:()=>b},{no:11,name:"rmDirCommand",kind:"message",oneof:"command",T:()=>y},{no:15,name:"resetFilesystemCommand",kind:"message",oneof:"command",T:()=>j}])}create(e){const n={command:{oneofKind:void 0}};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.command={oneofKind:"getFileContentsCommand",getFileContentsCommand:L.internalBinaryRead(e,e.uint32(),t,s.command.getFileContentsCommand)};break;case 2:s.command={oneofKind:"writeFileDataCommand",writeFileDataCommand:Q.internalBinaryRead(e,e.uint32(),t,s.command.writeFileDataCommand)};break;case 4:s.command={oneofKind:"reportFileDataCommand",reportFileDataCommand:x.internalBinaryRead(e,e.uint32(),t,s.command.reportFileDataCommand)};break;case 5:s.command={oneofKind:"rmFileCommand",rmFileCommand:p.internalBinaryRead(e,e.uint32(),t,s.command.rmFileCommand)};break;case 9:s.command={oneofKind:"listDirContentsCommand",listDirContentsCommand:F.internalBinaryRead(e,e.uint32(),t,s.command.listDirContentsCommand)};break;case 10:s.command={oneofKind:"mkDirCommand",mkDirCommand:b.internalBinaryRead(e,e.uint32(),t,s.command.mkDirCommand)};break;case 11:s.command={oneofKind:"rmDirCommand",rmDirCommand:y.internalBinaryRead(e,e.uint32(),t,s.command.rmDirCommand)};break;case 15:s.command={oneofKind:"resetFilesystemCommand",resetFilesystemCommand:j.internalBinaryRead(e,e.uint32(),t,s.command.resetFilesystemCommand)};break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){"getFileContentsCommand"===e.command.oneofKind&&L.internalBinaryWrite(e.command.getFileContentsCommand,n.tag(1,o.O0.LengthDelimited).fork(),t).join(),"writeFileDataCommand"===e.command.oneofKind&&Q.internalBinaryWrite(e.command.writeFileDataCommand,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),"reportFileDataCommand"===e.command.oneofKind&&x.internalBinaryWrite(e.command.reportFileDataCommand,n.tag(4,o.O0.LengthDelimited).fork(),t).join(),"rmFileCommand"===e.command.oneofKind&&p.internalBinaryWrite(e.command.rmFileCommand,n.tag(5,o.O0.LengthDelimited).fork(),t).join(),"listDirContentsCommand"===e.command.oneofKind&&F.internalBinaryWrite(e.command.listDirContentsCommand,n.tag(9,o.O0.LengthDelimited).fork(),t).join(),"mkDirCommand"===e.command.oneofKind&&b.internalBinaryWrite(e.command.mkDirCommand,n.tag(10,o.O0.LengthDelimited).fork(),t).join(),"rmDirCommand"===e.command.oneofKind&&y.internalBinaryWrite(e.command.rmDirCommand,n.tag(11,o.O0.LengthDelimited).fork(),t).join(),"resetFilesystemCommand"===e.command.oneofKind&&j.internalBinaryWrite(e.command.resetFilesystemCommand,n.tag(15,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const V=new K;class H extends i.G{constructor(){super("FileSystemResponse",[{no:1,name:"getFileContentsResponse",kind:"message",oneof:"response",T:()=>W},{no:2,name:"writeFileDataResponse",kind:"message",oneof:"response",T:()=>_},{no:4,name:"reportFileDataResponse",kind:"message",oneof:"response",T:()=>v},{no:5,name:"rmFileCommand",kind:"message",oneof:"response",T:()=>h},{no:9,name:"listDirContentsResponse",kind:"message",oneof:"response",T:()=>O},{no:10,name:"mkDirResponse",kind:"message",oneof:"response",T:()=>S},{no:11,name:"rmDirResponse",kind:"message",oneof:"response",T:()=>C},{no:15,name:"resetFilesystemResponse",kind:"message",oneof:"response",T:()=>B}])}create(e){const n={response:{oneofKind:void 0}};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.response={oneofKind:"getFileContentsResponse",getFileContentsResponse:W.internalBinaryRead(e,e.uint32(),t,s.response.getFileContentsResponse)};break;case 2:s.response={oneofKind:"writeFileDataResponse",writeFileDataResponse:_.internalBinaryRead(e,e.uint32(),t,s.response.writeFileDataResponse)};break;case 4:s.response={oneofKind:"reportFileDataResponse",reportFileDataResponse:v.internalBinaryRead(e,e.uint32(),t,s.response.reportFileDataResponse)};break;case 5:s.response={oneofKind:"rmFileCommand",rmFileCommand:h.internalBinaryRead(e,e.uint32(),t,s.response.rmFileCommand)};break;case 9:s.response={oneofKind:"listDirContentsResponse",listDirContentsResponse:O.internalBinaryRead(e,e.uint32(),t,s.response.listDirContentsResponse)};break;case 10:s.response={oneofKind:"mkDirResponse",mkDirResponse:S.internalBinaryRead(e,e.uint32(),t,s.response.mkDirResponse)};break;case 11:s.response={oneofKind:"rmDirResponse",rmDirResponse:C.internalBinaryRead(e,e.uint32(),t,s.response.rmDirResponse)};break;case 15:s.response={oneofKind:"resetFilesystemResponse",resetFilesystemResponse:B.internalBinaryRead(e,e.uint32(),t,s.response.resetFilesystemResponse)};break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){"getFileContentsResponse"===e.response.oneofKind&&W.internalBinaryWrite(e.response.getFileContentsResponse,n.tag(1,o.O0.LengthDelimited).fork(),t).join(),"writeFileDataResponse"===e.response.oneofKind&&_.internalBinaryWrite(e.response.writeFileDataResponse,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),"reportFileDataResponse"===e.response.oneofKind&&v.internalBinaryWrite(e.response.reportFileDataResponse,n.tag(4,o.O0.LengthDelimited).fork(),t).join(),"rmFileCommand"===e.response.oneofKind&&h.internalBinaryWrite(e.response.rmFileCommand,n.tag(5,o.O0.LengthDelimited).fork(),t).join(),"listDirContentsResponse"===e.response.oneofKind&&O.internalBinaryWrite(e.response.listDirContentsResponse,n.tag(9,o.O0.LengthDelimited).fork(),t).join(),"mkDirResponse"===e.response.oneofKind&&S.internalBinaryWrite(e.response.mkDirResponse,n.tag(10,o.O0.LengthDelimited).fork(),t).join(),"rmDirResponse"===e.response.oneofKind&&C.internalBinaryWrite(e.response.rmDirResponse,n.tag(11,o.O0.LengthDelimited).fork(),t).join(),"resetFilesystemResponse"===e.response.oneofKind&&B.internalBinaryWrite(e.response.resetFilesystemResponse,n.tag(15,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const q=new H},9260:(e,n,t)=>{t.d(n,{_:()=>v,U:()=>F});var o=t(8899),a=t(3923),s=t(5336),i=t(3724),r=t(3033);class l extends i.G{constructor(){super("InitWriteFileStreamCommand",[{no:1,name:"fileData",kind:"message",T:()=>r.HW},{no:2,name:"fileStreamId",kind:"scalar",T:13}])}create(e){const n={fileStreamId:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.fileData=r.HW.internalBinaryRead(e,e.uint32(),t,s.fileData);break;case 2:s.fileStreamId=e.uint32();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let l=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,l)}}return s}internalBinaryWrite(e,n,t){e.fileData&&r.HW.internalBinaryWrite(e.fileData,n.tag(1,o.O0.LengthDelimited).fork(),t).join(),0!==e.fileStreamId&&n.tag(2,o.O0.Varint).uint32(e.fileStreamId);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const m=new l;class d extends i.G{constructor(){super("InitWriteFileStreamAckResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"fileStreamId",kind:"scalar",T:13},{no:3,name:"message",kind:"scalar",T:9}])}create(e){const n={success:!1,fileStreamId:0,message:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.success=e.bool();break;case 2:s.fileStreamId=e.uint32();break;case 3:s.message=e.string();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){!1!==e.success&&n.tag(1,o.O0.Varint).bool(e.success),0!==e.fileStreamId&&n.tag(2,o.O0.Varint).uint32(e.fileStreamId),""!==e.message&&n.tag(3,o.O0.LengthDelimited).string(e.message);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const c=new d;class g extends i.G{constructor(){super("WriteFileStreamCompleteResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"fileStreamId",kind:"scalar",T:13},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"fileData",kind:"message",T:()=>r.HW}])}create(e){const n={success:!1,fileStreamId:0,message:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.success=e.bool();break;case 2:s.fileStreamId=e.uint32();break;case 3:s.message=e.string();break;case 4:s.fileData=r.HW.internalBinaryRead(e,e.uint32(),t,s.fileData);break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let l=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,l)}}return s}internalBinaryWrite(e,n,t){!1!==e.success&&n.tag(1,o.O0.Varint).bool(e.success),0!==e.fileStreamId&&n.tag(2,o.O0.Varint).uint32(e.fileStreamId),""!==e.message&&n.tag(3,o.O0.LengthDelimited).string(e.message),e.fileData&&r.HW.internalBinaryWrite(e.fileData,n.tag(4,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const p=new g;class u extends i.G{constructor(){super("InitReadFileStreamCommand",[{no:1,name:"filePath",kind:"scalar",T:9},{no:2,name:"fileStreamId",kind:"scalar",T:13}])}create(e){const n={filePath:"",fileStreamId:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.filePath=e.string();break;case 2:s.fileStreamId=e.uint32();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.filePath&&n.tag(1,o.O0.LengthDelimited).string(e.filePath),0!==e.fileStreamId&&n.tag(2,o.O0.Varint).uint32(e.fileStreamId);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const h=new u;class f extends i.G{constructor(){super("InitReadFileStreamAckResponse",[{no:1,name:"fileStatus",kind:"enum",T:()=>["GetFileStatusCode",r.WH]},{no:2,name:"fileStreamId",kind:"scalar",T:13},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"fileData",kind:"message",T:()=>r.HW}])}create(e){const n={fileStatus:0,fileStreamId:0,message:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.fileStatus=e.int32();break;case 2:s.fileStreamId=e.uint32();break;case 3:s.message=e.string();break;case 4:s.fileData=r.HW.internalBinaryRead(e,e.uint32(),t,s.fileData);break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let l=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,l)}}return s}internalBinaryWrite(e,n,t){0!==e.fileStatus&&n.tag(1,o.O0.Varint).int32(e.fileStatus),0!==e.fileStreamId&&n.tag(2,o.O0.Varint).uint32(e.fileStreamId),""!==e.message&&n.tag(3,o.O0.LengthDelimited).string(e.message),e.fileData&&r.HW.internalBinaryWrite(e.fileData,n.tag(4,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const y=new f;class w extends i.G{constructor(){super("ReadFileStreamCompleteResponse",[{no:1,name:"success",kind:"scalar",T:8},{no:2,name:"fileStreamId",kind:"scalar",T:13},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"fileData",kind:"message",T:()=>r.HW}])}create(e){const n={success:!1,fileStreamId:0,message:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.success=e.bool();break;case 2:s.fileStreamId=e.uint32();break;case 3:s.message=e.string();break;case 4:s.fileData=r.HW.internalBinaryRead(e,e.uint32(),t,s.fileData);break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let l=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,l)}}return s}internalBinaryWrite(e,n,t){!1!==e.success&&n.tag(1,o.O0.Varint).bool(e.success),0!==e.fileStreamId&&n.tag(2,o.O0.Varint).uint32(e.fileStreamId),""!==e.message&&n.tag(3,o.O0.LengthDelimited).string(e.message),e.fileData&&r.HW.internalBinaryWrite(e.fileData,n.tag(4,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const C=new w;class k extends i.G{constructor(){super("QromaStreamCommand",[{no:1,name:"initWriteFileStreamCommand",kind:"message",oneof:"command",T:()=>m},{no:2,name:"initReadFileStreamCommand",kind:"message",oneof:"command",T:()=>h}])}create(e){const n={command:{oneofKind:void 0}};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.command={oneofKind:"initWriteFileStreamCommand",initWriteFileStreamCommand:m.internalBinaryRead(e,e.uint32(),t,s.command.initWriteFileStreamCommand)};break;case 2:s.command={oneofKind:"initReadFileStreamCommand",initReadFileStreamCommand:h.internalBinaryRead(e,e.uint32(),t,s.command.initReadFileStreamCommand)};break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){"initWriteFileStreamCommand"===e.command.oneofKind&&m.internalBinaryWrite(e.command.initWriteFileStreamCommand,n.tag(1,o.O0.LengthDelimited).fork(),t).join(),"initReadFileStreamCommand"===e.command.oneofKind&&h.internalBinaryWrite(e.command.initReadFileStreamCommand,n.tag(2,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const b=new k;class R extends i.G{constructor(){super("QromaStreamResponse",[{no:1,name:"initWriteFileStreamAckResponse",kind:"message",oneof:"response",T:()=>c},{no:2,name:"writeFileStreamCompleteResponse",kind:"message",oneof:"response",T:()=>p},{no:3,name:"initReadFileStreamAckResponse",kind:"message",oneof:"response",T:()=>y},{no:4,name:"readFileStreamCompleteResponse",kind:"message",oneof:"response",T:()=>C}])}create(e){const n={response:{oneofKind:void 0}};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.response={oneofKind:"initWriteFileStreamAckResponse",initWriteFileStreamAckResponse:c.internalBinaryRead(e,e.uint32(),t,s.response.initWriteFileStreamAckResponse)};break;case 2:s.response={oneofKind:"writeFileStreamCompleteResponse",writeFileStreamCompleteResponse:p.internalBinaryRead(e,e.uint32(),t,s.response.writeFileStreamCompleteResponse)};break;case 3:s.response={oneofKind:"initReadFileStreamAckResponse",initReadFileStreamAckResponse:y.internalBinaryRead(e,e.uint32(),t,s.response.initReadFileStreamAckResponse)};break;case 4:s.response={oneofKind:"readFileStreamCompleteResponse",readFileStreamCompleteResponse:C.internalBinaryRead(e,e.uint32(),t,s.response.readFileStreamCompleteResponse)};break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){"initWriteFileStreamAckResponse"===e.response.oneofKind&&c.internalBinaryWrite(e.response.initWriteFileStreamAckResponse,n.tag(1,o.O0.LengthDelimited).fork(),t).join(),"writeFileStreamCompleteResponse"===e.response.oneofKind&&p.internalBinaryWrite(e.response.writeFileStreamCompleteResponse,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),"initReadFileStreamAckResponse"===e.response.oneofKind&&y.internalBinaryWrite(e.response.initReadFileStreamAckResponse,n.tag(3,o.O0.LengthDelimited).fork(),t).join(),"readFileStreamCompleteResponse"===e.response.oneofKind&&C.internalBinaryWrite(e.response.readFileStreamCompleteResponse,n.tag(4,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const S=new R;var T=t(7506),x=t(4870);class N extends i.G{constructor(){super("QromaCommCommand",[{no:1,name:"appCommandBytes",kind:"scalar",oneof:"command",T:12},{no:2,name:"coreCommand",kind:"message",oneof:"command",T:()=>x.tp},{no:3,name:"fsCommand",kind:"message",oneof:"command",T:()=>T.NF},{no:4,name:"streamCommand",kind:"message",oneof:"command",T:()=>b}])}create(e){const n={command:{oneofKind:void 0}};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.command={oneofKind:"appCommandBytes",appCommandBytes:e.bytes()};break;case 2:s.command={oneofKind:"coreCommand",coreCommand:x.tp.internalBinaryRead(e,e.uint32(),t,s.command.coreCommand)};break;case 3:s.command={oneofKind:"fsCommand",fsCommand:T.NF.internalBinaryRead(e,e.uint32(),t,s.command.fsCommand)};break;case 4:s.command={oneofKind:"streamCommand",streamCommand:b.internalBinaryRead(e,e.uint32(),t,s.command.streamCommand)};break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){"appCommandBytes"===e.command.oneofKind&&n.tag(1,o.O0.LengthDelimited).bytes(e.command.appCommandBytes),"coreCommand"===e.command.oneofKind&&x.tp.internalBinaryWrite(e.command.coreCommand,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),"fsCommand"===e.command.oneofKind&&T.NF.internalBinaryWrite(e.command.fsCommand,n.tag(3,o.O0.LengthDelimited).fork(),t).join(),"streamCommand"===e.command.oneofKind&&b.internalBinaryWrite(e.command.streamCommand,n.tag(4,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const v=new N;class I extends i.G{constructor(){super("QromaCommResponse",[{no:1,name:"appResponseBytes",kind:"scalar",oneof:"response",T:12},{no:2,name:"coreResponse",kind:"message",oneof:"response",T:()=>x.PF},{no:3,name:"fsResponse",kind:"message",oneof:"response",T:()=>T.TV},{no:5,name:"streamResponse",kind:"message",oneof:"response",T:()=>S}])}create(e){const n={response:{oneofKind:void 0}};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.response={oneofKind:"appResponseBytes",appResponseBytes:e.bytes()};break;case 2:s.response={oneofKind:"coreResponse",coreResponse:x.PF.internalBinaryRead(e,e.uint32(),t,s.response.coreResponse)};break;case 3:s.response={oneofKind:"fsResponse",fsResponse:T.TV.internalBinaryRead(e,e.uint32(),t,s.response.fsResponse)};break;case 5:s.response={oneofKind:"streamResponse",streamResponse:S.internalBinaryRead(e,e.uint32(),t,s.response.streamResponse)};break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){"appResponseBytes"===e.response.oneofKind&&n.tag(1,o.O0.LengthDelimited).bytes(e.response.appResponseBytes),"coreResponse"===e.response.oneofKind&&x.PF.internalBinaryWrite(e.response.coreResponse,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),"fsResponse"===e.response.oneofKind&&T.TV.internalBinaryWrite(e.response.fsResponse,n.tag(3,o.O0.LengthDelimited).fork(),t).join(),"streamResponse"===e.response.oneofKind&&S.internalBinaryWrite(e.response.streamResponse,n.tag(5,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const F=new I},4870:(e,n,t)=>{t.d(n,{tp:()=>$,PT:()=>k,PF:()=>U});var o=t(8899),a=t(3923),s=t(5336),i=t(3724),r=t(3033);class l extends i.G{constructor(){super("QromaCommSerialIoConfig",[{no:1,name:"baudRate",kind:"scalar",T:13},{no:2,name:"rxBufferSize",kind:"scalar",T:13},{no:3,name:"txBufferSize",kind:"scalar",T:13}])}create(e){const n={baudRate:0,rxBufferSize:0,txBufferSize:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.baudRate=e.uint32();break;case 2:s.rxBufferSize=e.uint32();break;case 3:s.txBufferSize=e.uint32();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.baudRate&&n.tag(1,o.O0.Varint).uint32(e.baudRate),0!==e.rxBufferSize&&n.tag(2,o.O0.Varint).uint32(e.rxBufferSize),0!==e.txBufferSize&&n.tag(3,o.O0.Varint).uint32(e.txBufferSize);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const m=new l;class d extends i.G{constructor(){super("QromaCommSerialProcessingConfig",[{no:1,name:"msDelayInProcessingLoop",kind:"scalar",T:13}])}create(e){const n={msDelayInProcessingLoop:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.msDelayInProcessingLoop=e.uint32();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.msDelayInProcessingLoop&&n.tag(1,o.O0.Varint).uint32(e.msDelayInProcessingLoop);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const c=new d;class g extends i.G{constructor(){super("QromaCoreLoggingConfig",[{no:1,name:"logLevel",kind:"enum",T:()=>["Qroma_LogLevel",r.wK]}])}create(e){const n={logLevel:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.logLevel=e.int32();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.logLevel&&n.tag(1,o.O0.Varint).int32(e.logLevel);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const p=new g;class u extends i.G{constructor(){super("HeartbeatConfiguration",[{no:1,name:"heartbeatType",kind:"enum",T:()=>["HeartbeatType",r.LS]},{no:2,name:"heartbeatIntervalInMs",kind:"scalar",T:13}])}create(e){const n={heartbeatType:0,heartbeatIntervalInMs:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.heartbeatType=e.int32();break;case 2:s.heartbeatIntervalInMs=e.uint32();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.heartbeatType&&n.tag(1,o.O0.Varint).int32(e.heartbeatType),0!==e.heartbeatIntervalInMs&&n.tag(2,o.O0.Varint).uint32(e.heartbeatIntervalInMs);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const h=new u;class f extends i.G{constructor(){super("QromaCoreManagementConfiguration",[{no:1,name:"projectLoopDelayInMs",kind:"scalar",T:13},{no:2,name:"heartbeatConfiguration",kind:"message",T:()=>h}])}create(e){const n={projectLoopDelayInMs:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.projectLoopDelayInMs=e.uint32();break;case 2:s.heartbeatConfiguration=h.internalBinaryRead(e,e.uint32(),t,s.heartbeatConfiguration);break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.projectLoopDelayInMs&&n.tag(1,o.O0.Varint).uint32(e.projectLoopDelayInMs),e.heartbeatConfiguration&&h.internalBinaryWrite(e.heartbeatConfiguration,n.tag(2,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const y=new f;class w extends i.G{constructor(){super("QromaCoreConfig",[{no:1,name:"serialIoConfig",kind:"message",T:()=>m},{no:2,name:"serialProcessingConfig",kind:"message",T:()=>c},{no:3,name:"loggingConfig",kind:"message",T:()=>p},{no:4,name:"managementConfig",kind:"message",T:()=>y}])}create(e){const n={};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.serialIoConfig=m.internalBinaryRead(e,e.uint32(),t,s.serialIoConfig);break;case 2:s.serialProcessingConfig=c.internalBinaryRead(e,e.uint32(),t,s.serialProcessingConfig);break;case 3:s.loggingConfig=p.internalBinaryRead(e,e.uint32(),t,s.loggingConfig);break;case 4:s.managementConfig=y.internalBinaryRead(e,e.uint32(),t,s.managementConfig);break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){e.serialIoConfig&&m.internalBinaryWrite(e.serialIoConfig,n.tag(1,o.O0.LengthDelimited).fork(),t).join(),e.serialProcessingConfig&&c.internalBinaryWrite(e.serialProcessingConfig,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),e.loggingConfig&&p.internalBinaryWrite(e.loggingConfig,n.tag(3,o.O0.LengthDelimited).fork(),t).join(),e.managementConfig&&y.internalBinaryWrite(e.managementConfig,n.tag(4,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const C=new w;let k=function(e){return e[e.Qc_Nac_NotSet=0]="Qc_Nac_NotSet",e[e.Qc_Nac_GetQromaCoreConfig=1]="Qc_Nac_GetQromaCoreConfig",e[e.Qc_Nac_GetQromaCoreFirmwareDetails=2]="Qc_Nac_GetQromaCoreFirmwareDetails",e[e.Qc_Nac_DisableCoreHeartbeat=3]="Qc_Nac_DisableCoreHeartbeat",e[e.Qc_Nac_EnableCoreHeartbeat=4]="Qc_Nac_EnableCoreHeartbeat",e[e.Qc_Nac_DisableLogging=5]="Qc_Nac_DisableLogging",e[e.Qc_Nac_EnableAllLogging=6]="Qc_Nac_EnableAllLogging",e}({});class b extends i.G{constructor(){super("GetQromaCoreConfigCommand",[{no:1,name:"ignoreThis",kind:"scalar",T:13}])}create(e){const n={ignoreThis:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.ignoreThis=e.uint32();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.ignoreThis&&n.tag(1,o.O0.Varint).uint32(e.ignoreThis);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}new b;class R extends i.G{constructor(){super("GetQromaCoreFirmwareDetailsCommand",[{no:1,name:"ignoreThis",kind:"scalar",T:13}])}create(e){const n={ignoreThis:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.ignoreThis=e.uint32();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.ignoreThis&&n.tag(1,o.O0.Varint).uint32(e.ignoreThis);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}new R;class S extends i.G{constructor(){super("RestartQromaDeviceCommand",[{no:1,name:"areYouSure",kind:"scalar",T:8}])}create(e){const n={areYouSure:!1};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.areYouSure=e.bool();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){!1!==e.areYouSure&&n.tag(1,o.O0.Varint).bool(e.areYouSure);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const T=new S;class x extends i.G{constructor(){super("RestartQromaDeviceAck",[{no:1,name:"youWerentSureSoWeDidnt",kind:"scalar",T:13}])}create(e){const n={youWerentSureSoWeDidnt:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.youWerentSureSoWeDidnt=e.uint32();else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.youWerentSureSoWeDidnt&&n.tag(1,o.O0.Varint).uint32(e.youWerentSureSoWeDidnt);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const N=new x;class v extends i.G{constructor(){super("SetQromaCommSerialIoConfigCommand",[{no:1,name:"config",kind:"message",T:()=>m}])}create(e){const n={};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.config=m.internalBinaryRead(e,e.uint32(),t,s.config);else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){e.config&&m.internalBinaryWrite(e.config,n.tag(1,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const I=new v;class F extends i.G{constructor(){super("SetQromaCommSerialProcessingConfig",[{no:1,name:"config",kind:"message",T:()=>c}])}create(e){const n={};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.config=c.internalBinaryRead(e,e.uint32(),t,s.config);else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){e.config&&c.internalBinaryWrite(e.config,n.tag(1,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const D=new F;class O extends i.G{constructor(){super("SetQromaCoreLoggingConfigCommand",[{no:1,name:"config",kind:"message",T:()=>p}])}create(e){const n={};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.config=p.internalBinaryRead(e,e.uint32(),t,s.config);else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){e.config&&p.internalBinaryWrite(e.config,n.tag(1,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const E=new O;class A extends i.G{constructor(){super("SetHeartbeatConfigurationCommand",[{no:1,name:"config",kind:"message",T:()=>h}])}create(e){const n={};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.config=h.internalBinaryRead(e,e.uint32(),t,s.config);else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){e.config&&h.internalBinaryWrite(e.config,n.tag(1,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}new A;class j extends i.G{constructor(){super("SetQromaCoreManagementConfiguration",[{no:1,name:"config",kind:"message",T:()=>y}])}create(e){const n={};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();if(1===n)s.config=y.internalBinaryRead(e,e.uint32(),t,s.config);else{let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){e.config&&y.internalBinaryWrite(e.config,n.tag(1,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const P=new j;class B extends i.G{constructor(){super("QromaCoreCommand",[{no:1,name:"noArgCommand",kind:"enum",oneof:"command",T:()=>["QromaCoreNoArgCommands",k]},{no:2,name:"restartQromaDevice",kind:"message",oneof:"command",T:()=>T},{no:3,name:"setQromaCommSerialIoConfig",kind:"message",oneof:"command",T:()=>I},{no:4,name:"setQromaCommSerialProcessingConfig",kind:"message",oneof:"command",T:()=>D},{no:5,name:"setQromaCoreLoggingConfig",kind:"message",oneof:"command",T:()=>E},{no:6,name:"setQromaCoreManagementConfiguration",kind:"message",oneof:"command",T:()=>P}])}create(e){const n={command:{oneofKind:void 0}};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.command={oneofKind:"noArgCommand",noArgCommand:e.int32()};break;case 2:s.command={oneofKind:"restartQromaDevice",restartQromaDevice:T.internalBinaryRead(e,e.uint32(),t,s.command.restartQromaDevice)};break;case 3:s.command={oneofKind:"setQromaCommSerialIoConfig",setQromaCommSerialIoConfig:I.internalBinaryRead(e,e.uint32(),t,s.command.setQromaCommSerialIoConfig)};break;case 4:s.command={oneofKind:"setQromaCommSerialProcessingConfig",setQromaCommSerialProcessingConfig:D.internalBinaryRead(e,e.uint32(),t,s.command.setQromaCommSerialProcessingConfig)};break;case 5:s.command={oneofKind:"setQromaCoreLoggingConfig",setQromaCoreLoggingConfig:E.internalBinaryRead(e,e.uint32(),t,s.command.setQromaCoreLoggingConfig)};break;case 6:s.command={oneofKind:"setQromaCoreManagementConfiguration",setQromaCoreManagementConfiguration:P.internalBinaryRead(e,e.uint32(),t,s.command.setQromaCoreManagementConfiguration)};break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){"noArgCommand"===e.command.oneofKind&&n.tag(1,o.O0.Varint).int32(e.command.noArgCommand),"restartQromaDevice"===e.command.oneofKind&&T.internalBinaryWrite(e.command.restartQromaDevice,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),"setQromaCommSerialIoConfig"===e.command.oneofKind&&I.internalBinaryWrite(e.command.setQromaCommSerialIoConfig,n.tag(3,o.O0.LengthDelimited).fork(),t).join(),"setQromaCommSerialProcessingConfig"===e.command.oneofKind&&D.internalBinaryWrite(e.command.setQromaCommSerialProcessingConfig,n.tag(4,o.O0.LengthDelimited).fork(),t).join(),"setQromaCoreLoggingConfig"===e.command.oneofKind&&E.internalBinaryWrite(e.command.setQromaCoreLoggingConfig,n.tag(5,o.O0.LengthDelimited).fork(),t).join(),"setQromaCoreManagementConfiguration"===e.command.oneofKind&&P.internalBinaryWrite(e.command.setQromaCoreManagementConfiguration,n.tag(6,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const $=new B;class L extends i.G{constructor(){super("QromaCoreResponse",[{no:1,name:"qromaCoreConfig",kind:"message",oneof:"response",T:()=>C},{no:2,name:"heartbeat",kind:"message",oneof:"response",T:()=>r.OU},{no:3,name:"firmwareDetails",kind:"message",oneof:"response",T:()=>r.Uq},{no:4,name:"restartAck",kind:"message",oneof:"response",T:()=>N}])}create(e){const n={response:{oneofKind:void 0}};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.response={oneofKind:"qromaCoreConfig",qromaCoreConfig:C.internalBinaryRead(e,e.uint32(),t,s.response.qromaCoreConfig)};break;case 2:s.response={oneofKind:"heartbeat",heartbeat:r.OU.internalBinaryRead(e,e.uint32(),t,s.response.heartbeat)};break;case 3:s.response={oneofKind:"firmwareDetails",firmwareDetails:r.Uq.internalBinaryRead(e,e.uint32(),t,s.response.firmwareDetails)};break;case 4:s.response={oneofKind:"restartAck",restartAck:N.internalBinaryRead(e,e.uint32(),t,s.response.restartAck)};break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let l=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,l)}}return s}internalBinaryWrite(e,n,t){"qromaCoreConfig"===e.response.oneofKind&&C.internalBinaryWrite(e.response.qromaCoreConfig,n.tag(1,o.O0.LengthDelimited).fork(),t).join(),"heartbeat"===e.response.oneofKind&&r.OU.internalBinaryWrite(e.response.heartbeat,n.tag(2,o.O0.LengthDelimited).fork(),t).join(),"firmwareDetails"===e.response.oneofKind&&r.Uq.internalBinaryWrite(e.response.firmwareDetails,n.tag(3,o.O0.LengthDelimited).fork(),t).join(),"restartAck"===e.response.oneofKind&&N.internalBinaryWrite(e.response.restartAck,n.tag(4,o.O0.LengthDelimited).fork(),t).join();let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const U=new L},3033:(e,n,t)=>{t.d(n,{HW:()=>g,LS:()=>m,OU:()=>f,Uq:()=>u,WH:()=>l,wK:()=>r});var o=t(8899),a=t(3923),s=t(5336),i=t(3724);let r=function(e){return e[e.LogLevel_All=0]="LogLevel_All",e[e.LogLevel_Info=10]="LogLevel_Info",e[e.LogLevel_Error=100]="LogLevel_Error",e[e.LogLevel_Nothing=255]="LogLevel_Nothing",e}({}),l=function(e){return e[e.GFSC_NOT_SET=0]="GFSC_NOT_SET",e[e.GFSC_FILE_EXISTS=1]="GFSC_FILE_EXISTS",e[e.GFSC_ERR_OPEN_FILE=2]="GFSC_ERR_OPEN_FILE",e[e.GFSC_ERR_INVALID_FILE_PATH=3]="GFSC_ERR_INVALID_FILE_PATH",e}({}),m=function(e){return e[e.HeartbeatType_NotSet=0]="HeartbeatType_NotSet",e[e.HeartbeatType_None=1]="HeartbeatType_None",e[e.HeartbeatType_Interval=2]="HeartbeatType_Interval",e}({});class d extends i.G{constructor(){super("Qroma_LogMessage",[{no:1,name:"tick",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9}])}create(e){const n={tick:0,message:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.tick=e.uint32();break;case 2:s.message=e.string();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.tick&&n.tag(1,o.O0.Varint).uint32(e.tick),""!==e.message&&n.tag(2,o.O0.LengthDelimited).string(e.message);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}new d;class c extends i.G{constructor(){super("FileData",[{no:1,name:"filename",kind:"scalar",T:9},{no:2,name:"filesize",kind:"scalar",T:13},{no:3,name:"checksum",kind:"scalar",T:13}])}create(e){const n={filename:"",filesize:0,checksum:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.filename=e.string();break;case 2:s.filesize=e.uint32();break;case 3:s.checksum=e.uint32();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.filename&&n.tag(1,o.O0.LengthDelimited).string(e.filename),0!==e.filesize&&n.tag(2,o.O0.Varint).uint32(e.filesize),0!==e.checksum&&n.tag(3,o.O0.Varint).uint32(e.checksum);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const g=new c;class p extends i.G{constructor(){super("FirmwareDetails",[{no:1,name:"buildTime",kind:"scalar",T:9},{no:2,name:"qromaFirmwareLibVersion",kind:"scalar",T:9},{no:3,name:"qromaDeviceFirmwareVersion",kind:"scalar",T:9}])}create(e){const n={buildTime:"",qromaFirmwareLibVersion:"",qromaDeviceFirmwareVersion:""};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.buildTime=e.string();break;case 2:s.qromaFirmwareLibVersion=e.string();break;case 3:s.qromaDeviceFirmwareVersion=e.string();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){""!==e.buildTime&&n.tag(1,o.O0.LengthDelimited).string(e.buildTime),""!==e.qromaFirmwareLibVersion&&n.tag(2,o.O0.LengthDelimited).string(e.qromaFirmwareLibVersion),""!==e.qromaDeviceFirmwareVersion&&n.tag(3,o.O0.LengthDelimited).string(e.qromaDeviceFirmwareVersion);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const u=new p;class h extends i.G{constructor(){super("HeartbeatResponse",[{no:1,name:"uptimeInMs",kind:"scalar",T:13},{no:2,name:"heartbeatTicks",kind:"scalar",T:13}])}create(e){const n={uptimeInMs:0,heartbeatTicks:0};return globalThis.Object.defineProperty(n,s.$,{enumerable:!1,value:this}),void 0!==e&&(0,a.x)(this,n,e),n}internalBinaryRead(e,n,t,a){let s=a??this.create(),i=e.pos+n;for(;e.pos<i;){let[n,a]=e.tag();switch(n){case 1:s.uptimeInMs=e.uint32();break;case 2:s.heartbeatTicks=e.uint32();break;default:let i=t.readUnknownField;if("throw"===i)throw new globalThis.Error(`Unknown field ${n} (wire type ${a}) for ${this.typeName}`);let r=e.skip(a);!1!==i&&(!0===i?o.f$.onRead:i)(this.typeName,s,n,a,r)}}return s}internalBinaryWrite(e,n,t){0!==e.uptimeInMs&&n.tag(1,o.O0.Varint).uint32(e.uptimeInMs),0!==e.heartbeatTicks&&n.tag(2,o.O0.Varint).uint32(e.heartbeatTicks);let a=t.writeUnknownFields;return!1!==a&&(1==a?o.f$.onWrite:a)(this.typeName,e,n),n}}const f=new h},7472:(e,n,t)=>{t.d(n,{_:()=>o});const o=(e,n)=>{if(void 0===n)throw Error("sendQromaAppCommand() failure - no commandMessageType provided on IUseQromaAppWebSerialInputs");console.log("RAW APP COMMAND"),console.log(e);try{const t=n.toBinary(e);console.log("BYTES DONE"),console.log(t);const o={command:{oneofKind:"appCommandBytes",appCommandBytes:t}};return console.log("QROMA COMM COMMAND READY"),console.log(o),console.log(e),o}catch(t){return console.log("UNABLE TO JSON FROM COMMAND MESSAGE"),void console.log(t)}}},2227:(e,n,t)=>{t.d(n,{d:()=>d});var o=t(6995),a=t(2046),s=t(6540),i=t(1042),r=t(6967),l=t(3033);const m=e=>{let n,t,s="awaiting-init-ack",i=!1,m=-1,d=!1,c=new Uint8Array,g=!1;const p=e=>(console.log("IN DFC RX"),console.log(e),"streamResponse"!==e.response.oneofKind||"initReadFileStreamAckResponse"!==e.response.streamResponse.response.oneofKind||(console.log("ACK RX - initReadFileStreamAckResponse"),s="awaiting-all-bytes",n=e.response.streamResponse.response.initReadFileStreamAckResponse,i=n.fileStatus===l.WH.GFSC_FILE_EXISTS,n.fileStatus!==l.WH.GFSC_FILE_EXISTS&&(console.log("UNSUCCESSFUL ACK RESPONSE"),console.log(n),s="complete-err"),m=n.fileData.filesize,s="awaiting-all-bytes",console.log("CHECK FOR ACK RESULT DONE"),!1)),u=e=>{if("streamResponse"===e.response.oneofKind&&"readFileStreamCompleteResponse"===e.response.streamResponse.response.oneofKind){if(console.log("COMPLETE RX - readFileStreamCompleteResponse"),t=e.response.streamResponse.response.readFileStreamCompleteResponse,g=t.success,!g)return console.log("UNSUCCESSFUL TX COMPLETE RESPONSE"),console.log(t),void(s="complete-err");const a=(0,o.QR)(c);if(a!==n.fileData.checksum)return console.log("TX CHECKSUM MISMATCH"),console.log(n),console.log(a),console.log(c),void(s="complete-err");s="complete-success"}return!0},h=Date.now()+e,f=(0,r.p)("downloadRx");return console.log("CREATING DEFAULT QROMA PARSER"),{hasTimeoutOccurred:()=>Date.now()>h,onTimeout:()=>{console.log("IQromaCommDownloadFileContentsRxHandler timed out")},onRx:e=>{console.log("xyz");try{switch(console.log("abc"),console.log("IQromaCommDownloadFileContentsRxHandler - onRx!!!()"),console.log("IQromaCommDownloadFileContentsRxHandler - onRx2()",s,e),console.log("#4"),console.log("IQromaCommDownloadFileContentsRxHandler - onRx3()a"),console.log(s),s){case"awaiting-init-ack":return console.log("start to handle init ack check"),f.parse(e,p);case"awaiting-all-bytes":return(e=>{const n=m-c.length,t=e.slice(0,n),o=e.slice(n);return c=(0,a.KC)(c,t),console.log("TOTAL FILE BYTES COUNT: "+c.length),c.length>=m&&(s="awaiting-msg-complete",d=!0,console.log("ALL FILE BYTES RECEIVED: "+c.length),console.log(o)),o})(e);case"awaiting-msg-complete":return f.parse(e,u);default:return console.log("UNEXPECTED DOWNLOAD STAGE"),console.log(s),new Uint8Array}}catch(n){console.log("ON RX ERROR"),console.log(n)}return new Uint8Array},isRxComplete:()=>"complete-success"===s||"complete-err"===s,getFileBytes:()=>c,getDownloadStage:()=>s,getAckResponse:()=>n,getTxCompleteResult:()=>t}},d=()=>{console.log("STARTING QromaCommFileSystemRxApi");const[e,n]=(0,s.useState)({isConnected:!1,isMonitorOn:!1,isPortConnected:!1,isQromaMonitoringOn:!1,isWebSerialConnected:!1,keepQromaMonitoringOn:!1}),t=(0,i.o)((e=>{var t;console.log("ON CONN CHANGE"),t=e,console.log("SET CONNECTION STATE"),console.log(t),n(t)})),l=async(e,n)=>{const a=(0,o.QR)(n),s={command:{oneofKind:"fsCommand",fsCommand:{command:{oneofKind:"writeFileDataCommand",writeFileDataCommand:{fileBytes:n,fileData:{filename:e,filesize:n.length,checksum:a}}}}}};await t.sendQromaCommCommand(s)},d=async(e,n)=>{const s=(0,o.QR)(n),i={command:{oneofKind:"streamCommand",streamCommand:{command:{oneofKind:"initWriteFileStreamCommand",initWriteFileStreamCommand:{fileStreamId:Math.floor(Date.now()/1e3),fileData:{filename:e,filesize:n.length,checksum:s}}}}}},l=await(async()=>{let e,n=!1;const o=Date.now()+2500,s=(0,r.p)("_streamFileContentsAck"),l=n=>(console.log("CHECKING MESSAGES FOR STREAM ACK"),console.log(n),"streamResponse"===n.response.oneofKind&&"initWriteFileStreamAckResponse"===n.response.streamResponse.response.oneofKind&&(console.log("FOUND IT! RX rxOnQromaCommAckResponse"),console.log(n),e=n.response.streamResponse.response.initWriteFileStreamAckResponse),!0);let m={hasTimeoutOccurred:()=>Date.now()>o,onTimeout:()=>{n=!0},onRx:e=>{console.log("RX rxOnQromaCommAckResponse ??");const n=s.parse(e,l);return console.log(n),n},isRxComplete:()=>void 0!==e};return(0,a.j2)("pre sendQromaCommCommandRx() - init write"),await t.sendQromaCommCommandRx(i,m),(0,a.j2)("done sendQromaCommCommandRx - init write"),console.log(e),console.log(n),void 0!==e})();console.log("initSuccess RESPONSE"),console.log(l);(async e=>{await t.qromaWebSerial.sendBytesInChunks(e,50,50)})(n),console.log("DONE WAITING FOR STREAQM SEND");const m=await(async()=>{let e=!1;const o=1.5*n.length,a=Date.now()+o,s=(0,r.p)("_waitForUploadToComplete"),i=e=>(console.log("CHECKING MESSAGES FOR STREAM COMPLETE"),console.log(e),"streamResponse"===e.response.oneofKind&&"writeFileStreamCompleteResponse"===e.response.streamResponse.response.oneofKind&&(console.log("FILTER SUCCESS"),l=e.response.streamResponse.response.writeFileStreamCompleteResponse),!0);let l,m={hasTimeoutOccurred:()=>Date.now()>a,onTimeout:()=>{console.log("RX rxOnQromaCommCompleteResponse TIMED OUT"),e=!0},onRx:e=>(console.log("RX rxOnQromaCommCompleteResponse"),s.parse(e,i)),isRxComplete:()=>{const e=void 0!==l;return console.log("UPLOAD RX IS COMPLETE? CHECK: "+e),e}};return await t.monitorRx(m),console.log("DONE WAITING FOR RX COMPLETE CHECK"),console.log(m.isRxComplete()),console.log(m.hasTimeoutOccurred()),console.log("RECEIVED SEND COMPLETE RESPONSE"),console.log(l),console.log(e),void 0!==l})();console.log("uploadComplete RESPONSE"),console.log(m)};return{init:()=>{t.startMonitoring()},getFileDetailsRx:async e=>{console.log("GET FILE DETAILS RX");const n={command:{oneofKind:"fsCommand",fsCommand:{command:{oneofKind:"reportFileDataCommand",reportFileDataCommand:{filePath:e}}}}};let o,a=!1;const s=Date.now()+2e3,i=(0,r.p)("getFileDetailsRx"),l=e=>("fsResponse"===e.response.oneofKind&&"reportFileDataResponse"===e.response.fsResponse.response.oneofKind&&(o=e.response.fsResponse.response.reportFileDataResponse),!0);let m={hasTimeoutOccurred:()=>Date.now()>s,onTimeout:()=>{a=!0},onRx:e=>i.parse(e,l),isRxComplete:()=>void 0!==o};return await t.sendQromaCommCommandRx(n,m),console.log("FILE DETAILS RESULT RX"),console.log(o),console.log(a),o},getFileContents:async e=>{const n={command:{oneofKind:"fsCommand",fsCommand:{command:{oneofKind:"getFileContentsCommand",getFileContentsCommand:{filePath:e}}}}};let o,a=!1;const s=Date.now()+2e3,i=(0,r.p)("getFileDetailsRx"),l=e=>("fsResponse"===e.response.oneofKind&&"getFileContentsResponse"===e.response.fsResponse.response.oneofKind&&(o=e.response.fsResponse.response.getFileContentsResponse),!0);let m={hasTimeoutOccurred:()=>Date.now()>s,onTimeout:()=>{a=!0},onRx:e=>i.parse(e,l),isRxComplete:()=>void 0!==o};return await t.sendQromaCommCommandRx(n,m),console.log("GetFileContentsResponse RX"),console.log(o),console.log(a),o},writeFileContents:async(e,n)=>n.length<500?await l(e,n):await d(e,n),downloadFileContents:async e=>{const n={command:{oneofKind:"streamCommand",streamCommand:{command:{oneofKind:"initReadFileStreamCommand",initReadFileStreamCommand:{filePath:e,fileStreamId:Math.floor(Date.now()/1e3)}}}}},o=m(5e3);return await t.sendQromaCommCommandRx(n,o),"complete-success"===o.getDownloadStage()?o.getFileBytes():(console.log("DOWNLOAD DIDN'T COMPLETE SUCCESSFULLY"),console.log(o),null)},rmFile:async e=>{const n={command:{oneofKind:"fsCommand",fsCommand:{command:{oneofKind:"rmFileCommand",rmFileCommand:{filePath:e}}}}};console.log(n),await t.sendQromaCommCommand(n)},listDir:async e=>{const n={command:{oneofKind:"fsCommand",fsCommand:{command:{oneofKind:"listDirContentsCommand",listDirContentsCommand:{dirPath:e,startsWithConstraint:"",endsWithConstraint:""}}}}};let o,a=!1;const s=Date.now()+2e3,i=(0,r.p)("listDir"),l=e=>("fsResponse"===e.response.oneofKind&&"listDirContentsResponse"===e.response.fsResponse.response.oneofKind&&(o=e.response.fsResponse.response.listDirContentsResponse),!0);let m={hasTimeoutOccurred:()=>Date.now()>s,onTimeout:()=>{a=!0},onRx:e=>i.parse(e,l),isRxComplete:()=>void 0!==o};return await t.sendQromaCommCommandRx(n,m),console.log("listDir RESULT RX"),console.log(o),console.log(a),o},mkDir:async e=>{const n={command:{oneofKind:"fsCommand",fsCommand:{command:{oneofKind:"mkDirCommand",mkDirCommand:{dirPath:e}}}}};let o,a=!1;const s=Date.now()+2e3,i=(0,r.p)("mkDir"),l=e=>("fsResponse"===e.response.oneofKind&&"listDirContentsResponse"===e.response.fsResponse.response.oneofKind&&(o=e.response.fsResponse.response.listDirContentsResponse),!0);let m={hasTimeoutOccurred:()=>Date.now()>s,onTimeout:()=>{a=!0},onRx:e=>i.parse(e,l),isRxComplete:()=>void 0!==o};return await t.sendQromaCommCommandRx(n,m),console.log("mkDir RESULT RX"),console.log(o),console.log(a),o},rmDir:async e=>{const n={command:{oneofKind:"fsCommand",fsCommand:{command:{oneofKind:"rmDirCommand",rmDirCommand:{dirPath:e}}}}};await t.sendQromaCommCommand(n)},connectionState:t.getConnectionState(),unsubscribe:t.unsubscribe}}},6967:(e,n,t)=>{t.d(n,{p:()=>s});var o=t(8287),a=t(9260);const s=e=>({parse:(n,t)=>{let s=new Uint8Array(n),i=!0;for(;i;){let n=s.findIndex((e=>10===e));if(-1===n)return s;if(0!==n)try{const l=s.slice(0,n);s=s.slice(n+1,s.length);const m=(new TextDecoder).decode(l);console.log("QCP - DEV RESPONSE: "+m),console.log("QCP - DEV REMAINING: "+(new TextDecoder).decode(s));try{const s=o.hp.from(m,"base64"),r=a.U.fromBinary(s);console.log("RESPONSE FROM BYTES - "+e),console.log(r),console.log("DefaultQromaParser - parse() has QC response"),console.log(r),n=0,i=t(r),i||console.log("QROMA COMM PARSING CANCELED")}catch(r){}}catch(r){}else s=s.slice(1,s.length)}return s}})},1042:(e,n,t)=>{t.d(n,{o:()=>r});var o=t(8287),a=t(4724),s=t(9260),i=t(2046);const r=e=>{if(!window)throw Error("Not running in a browser");let n,t=new Uint8Array;const r=e=>{n=e,console.log("ENTER RX MODE",n)},l=()=>{n=void 0,console.log("EXIT RX MODE",n)},m=(0,a.a)((e=>{console.log("QromaCommWebSerial RX - onData - "+e.length+" bytes"),console.log(n),console.log(e);let o=(0,i.KC)(t,e);if(n){console.log("QROMA COMM RX PARSING");let e=o,s=e.length+1;for(;e.length<s;)console.log("ONRX DATA"),console.log(e),s=e.length,e=n.onRx(e);a=e,console.log("SETTING RX BUFFER"),console.log(a),t=a,console.log("FINISH QROMA COMM RX PARSING")}var a}),e);return{startMonitoring:async()=>{try{console.log("COMM WEB SERIAL - START"),m.startMonitoring(),console.log("COMM WEB SERIAL - START - CONNECTED")}catch(e){console.log("COMM WEB SERIAL - ON CONNECTION FALSE"),console.log(e)}},getConnectionState:m.getConnectionState,stopMonitoring:m.stopMonitoring,sendQromaCommCommand:async e=>{if(!m.getConnectionState().isWebSerialConnected)return console.log("sendQromaCommCommand - CAN'T SEND COMMAND - NO CONNECTION"),void console.log(e);const n=s._.toBinary(e);console.log(n);const t=o.hp.from(n).toString("base64")+"\n";console.log(t),console.log(t.length),await m.sendString(t)},sendQromaCommCommandRx:async(e,t)=>{if(console.log("STARTING sendQromaCommCommandRx()"),!m.getConnectionState().isWebSerialConnected)return console.log("sendQromaCommCommand - CAN'T SEND COMMAND - NO CONNECTION"),void console.log(e);if(void 0!==n){const e="_qromaCommRxHandler already assigned - not handling";throw console.log(e),new Error(e)}const a=s._.toBinary(e);console.log(a);const d=o.hp.from(a).toString("base64")+"\n";for(console.log(d),console.log(d.length),r(t),m.sendString(d),(0,i.j2)("START WAITING FOR COMM RX TO COMPLETE");!t.isRxComplete()&&!t.hasTimeoutOccurred();)(0,i.j2)("WAITING FOR COMM RX TO COMPLETE - "),await(0,i.yy)(25);console.log("IS RX COMPLETE???"),console.log(t.isRxComplete()),console.log(t.hasTimeoutOccurred()),l()},monitorRx:async e=>{for(r(e);!e.isRxComplete()&&!e.hasTimeoutOccurred();)await(0,i.yy)(25);l()},qromaWebSerial:m,unsubscribe:m.unsubscribe}}}}]);